const e=craftercms.libs.React,{useState:t,useEffect:r,forwardRef:n}=craftercms.libs.React,a=craftercms.libs.React&&Object.prototype.hasOwnProperty.call(craftercms.libs.React,"default")?craftercms.libs.React.default:craftercms.libs.React,o=craftercms.libs.MaterialUI.Stack&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Stack,"default")?craftercms.libs.MaterialUI.Stack.default:craftercms.libs.MaterialUI.Stack,l=craftercms.libs.MaterialUI.Snackbar&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Snackbar,"default")?craftercms.libs.MaterialUI.Snackbar.default:craftercms.libs.MaterialUI.Snackbar,i=craftercms.libs.MaterialUI.Alert&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Alert,"default")?craftercms.libs.MaterialUI.Alert.default:craftercms.libs.MaterialUI.Alert,c=craftercms.libs.MaterialUI.DialogActions&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogActions,"default")?craftercms.libs.MaterialUI.DialogActions.default:craftercms.libs.MaterialUI.DialogActions,{CrafterThemeProvider:s}=craftercms.components,{createAction:u}=craftercms.libs.ReduxToolkit,{useDispatch:f}=craftercms.libs.ReactRedux,d=craftercms.libs.MaterialUI.Table&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Table,"default")?craftercms.libs.MaterialUI.Table.default:craftercms.libs.MaterialUI.Table,p=craftercms.libs.MaterialUI.TableBody&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableBody,"default")?craftercms.libs.MaterialUI.TableBody.default:craftercms.libs.MaterialUI.TableBody,m=craftercms.libs.MaterialUI.TableContainer&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableContainer,"default")?craftercms.libs.MaterialUI.TableContainer.default:craftercms.libs.MaterialUI.TableContainer,b=craftercms.libs.MaterialUI.TableHead&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableHead,"default")?craftercms.libs.MaterialUI.TableHead.default:craftercms.libs.MaterialUI.TableHead,g=craftercms.libs.MaterialUI.TableRow&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableRow,"default")?craftercms.libs.MaterialUI.TableRow.default:craftercms.libs.MaterialUI.TableRow,y=craftercms.libs.MaterialUI.TableCell&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableCell,"default")?craftercms.libs.MaterialUI.TableCell.default:craftercms.libs.MaterialUI.TableCell,h=craftercms.libs.MaterialUI.Paper&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Paper,"default")?craftercms.libs.MaterialUI.Paper.default:craftercms.libs.MaterialUI.Paper,v=craftercms.libs.MaterialUI.Grid&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Grid,"default")?craftercms.libs.MaterialUI.Grid.default:craftercms.libs.MaterialUI.Grid,O=craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined"),I=craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined"),w=craftercms.libs.MaterialUI.MenuItem&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.MenuItem,"default")?craftercms.libs.MaterialUI.MenuItem.default:craftercms.libs.MaterialUI.MenuItem,x=craftercms.libs.MaterialUI.Popper&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Popper,"default")?craftercms.libs.MaterialUI.Popper.default:craftercms.libs.MaterialUI.Popper,C=craftercms.libs.MaterialUI.MenuList&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.MenuList,"default")?craftercms.libs.MaterialUI.MenuList.default:craftercms.libs.MaterialUI.MenuList,M=craftercms.libs.MaterialUI.Grow&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Grow,"default")?craftercms.libs.MaterialUI.Grow.default:craftercms.libs.MaterialUI.Grow,S=craftercms.libs.MaterialUI.ClickAwayListener&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.ClickAwayListener,"default")?craftercms.libs.MaterialUI.ClickAwayListener.default:craftercms.libs.MaterialUI.ClickAwayListener,E=craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined"),D=craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined"),{styled:P,useThemeProps:T,useTheme:j,alpha:U}=craftercms.libs.MaterialUI,k=craftercms.libs.MaterialUI.TextField&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TextField,"default")?craftercms.libs.MaterialUI.TextField.default:craftercms.libs.MaterialUI.TextField,N=craftercms.libs.MaterialUI.DialogContent&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogContent,"default")?craftercms.libs.MaterialUI.DialogContent.default:craftercms.libs.MaterialUI.DialogContent,_=craftercms.libs.MaterialUI.DialogTitle&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogTitle,"default")?craftercms.libs.MaterialUI.DialogTitle.default:craftercms.libs.MaterialUI.DialogTitle,R=craftercms.libs.MaterialUI.DialogContentText&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogContentText,"default")?craftercms.libs.MaterialUI.DialogContentText.default:craftercms.libs.MaterialUI.DialogContentText,A=craftercms.libs.MaterialUI.Button&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Button,"default")?craftercms.libs.MaterialUI.Button.default:craftercms.libs.MaterialUI.Button,F=craftercms.libs.ReactDOM&&Object.prototype.hasOwnProperty.call(craftercms.libs.ReactDOM,"default")?craftercms.libs.ReactDOM.default:craftercms.libs.ReactDOM,B=craftercms.libs.MaterialUI.Dialog&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Dialog,"default")?craftercms.libs.MaterialUI.Dialog.default:craftercms.libs.MaterialUI.Dialog,{Subject:L}=craftercms.libs.rxjs,{unstable_useEnhancedEffect:W,unstable_useId:Y,useForkRef:X,useControlled:H,ownerDocument:G}=craftercms.libs.MaterialUI,K=craftercms.libs.MaterialUI.generateUtilityClass&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.generateUtilityClass,"default")?craftercms.libs.MaterialUI.generateUtilityClass.default:craftercms.libs.MaterialUI.generateUtilityClass,$=craftercms.libs.MaterialUI.generateUtilityClasses&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.generateUtilityClasses,"default")?craftercms.libs.MaterialUI.generateUtilityClasses.default:craftercms.libs.MaterialUI.generateUtilityClasses,V=craftercms.libs.MaterialUI.Collapse&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Collapse,"default")?craftercms.libs.MaterialUI.Collapse.default:craftercms.libs.MaterialUI.Collapse,z=craftercms.components.ToolsPanelListItemButton&&Object.prototype.hasOwnProperty.call(craftercms.components.ToolsPanelListItemButton,"default")?craftercms.components.ToolsPanelListItemButton.default:craftercms.components.ToolsPanelListItemButton,q=craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined"),J=craftercms.libs.MaterialUI.Tooltip&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Tooltip,"default")?craftercms.libs.MaterialUI.Tooltip.default:craftercms.libs.MaterialUI.Tooltip,Q=craftercms.libs.MaterialUI.IconButton&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.IconButton,"default")?craftercms.libs.MaterialUI.IconButton.default:craftercms.libs.MaterialUI.IconButton;var Z=function(){return Z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Z.apply(this,arguments)};function ee(e,t,r,n){return new(r||(r=Promise))((function(a,o){function l(e){try{c(n.next(e))}catch(e){o(e)}}function i(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))}function te(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}const re=u("SHOW_WIDGET_DIALOG"),ne=u("CLOSE_WIDGET_DIALOG");var ae=function(t){var r,n,a=t.selectedItem,o=a?(r=a.name,n=a.path,{name:r,path:n}):null;return e.createElement(e.Fragment,null,e.createElement(v,{container:!0,sx:{padding:"15px"}},e.createElement(m,{component:h},e.createElement(d,{sx:{minWidth:650},"aria-label":"selected item table"},e.createElement(b,null,e.createElement(g,null,e.createElement(y,null,"Name"),e.createElement(y,null,"Path"))),e.createElement(p,null,o&&e.createElement(g,{key:o.name},e.createElement(y,{component:"th",scope:"row"},o.name),e.createElement(y,null,o.path)))))))};function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(this,arguments)}function le(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function ie(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=ie(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ce(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=ie(e))&&(n&&(n+=" "),n+=t);return n}var se=Object.freeze({__proto__:null,clsx:ce,default:ce});function ue(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var fe={exports:{}};function de(){}function pe(){}pe.resetWarningCache=de;function me(e,t,r){const n={};return Object.keys(e).forEach((a=>{n[a]=e[a].reduce(((e,n)=>(n&&(e.push(t(n)),r&&r[n]&&e.push(r[n])),e)),[]).join(" ")})),n}fe.exports=function(){function e(e,t,r,n,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pe,resetWarningCache:de};return r.PropTypes=r,r}();var be={exports:{}},ge={},ye=a,he=Symbol.for("react.element"),ve=Symbol.for("react.fragment"),Oe=Object.prototype.hasOwnProperty,Ie=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,we={key:!0,ref:!0,__self:!0,__source:!0};function xe(e,t,r){var n,a={},o=null,l=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(l=t.ref),t)Oe.call(t,n)&&!we.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:he,type:e,key:o,ref:l,props:a,_owner:Ie.current}}ge.Fragment=ve,ge.jsx=xe,ge.jsxs=xe,be.exports=ge;var Ce=e.createContext({});const Me=["element"];const Se=e.createContext({});const Ee=()=>{};function De(t){const[,r]=e.useState(),{registerDescendant:n=Ee,unregisterDescendant:a=Ee,descendants:o=[],parentId:l=null}=e.useContext(Se),i=function(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}(o,(e=>e.element===t.element)),c=function(t){const r=e.useRef(null);return e.useEffect((()=>{r.current=t}),[t]),r.current}(o),s=o.some(((e,t)=>c&&c[t]&&c[t].element!==e.element));return W((()=>{if(t.element)return n(oe({},t,{index:i})),()=>{a(t.element)};r({})}),[n,a,i,s,t]),{parentId:l,index:i}}function Pe(t){const{children:r,id:n}=t,[a,o]=e.useState([]),l=e.useCallback((e=>{let{element:t}=e,r=le(e,Me);o((e=>{let n;if(0===e.length)return[oe({},r,{element:t,index:0})];const a=function(e,t){let r=0,n=e.length-1;for(;r<=n;){const a=Math.floor((r+n)/2);if(e[a].element===t)return a;e[a].element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING?n=a-1:r=a+1}return r}(e,t);if(e[a]&&e[a].element===t)n=e;else{const o=oe({},r,{element:t,index:a});n=e.slice(),n.splice(a,0,o)}return n.forEach(((e,t)=>{e.index=t})),n}))}),[]),i=e.useCallback((e=>{o((t=>t.filter((t=>e!==t.element))))}),[]),c=e.useMemo((()=>({descendants:a,registerDescendant:l,unregisterDescendant:i,parentId:n})),[a,l,i,n]);return be.exports.jsx(Se.Provider,{value:c,children:r})}function Te(e){return K("MuiTreeView",e)}$("MuiTreeView",["root"]);const je=["children","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disabledItemsFocusable","disableSelection","expanded","id","multiSelect","onBlur","onFocus","onKeyDown","onNodeFocus","onNodeSelect","onNodeToggle","selected"],Ue=P("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0});function ke(e,t,r){for(let n=t;n<e.length;n+=1)if(r===e[n])return n;return-1}function Ne(){return!1}const _e=[],Re=[];var Ae=e.forwardRef((function(t,r){const n=T({props:t,name:"MuiTreeView"}),{children:a,className:o,defaultCollapseIcon:l,defaultEndIcon:i,defaultExpanded:c=_e,defaultExpandIcon:s,defaultParentIcon:u,defaultSelected:f=Re,disabledItemsFocusable:d=!1,disableSelection:p=!1,expanded:m,id:b,multiSelect:g=!1,onBlur:y,onFocus:h,onKeyDown:v,onNodeFocus:O,onNodeSelect:I,onNodeToggle:w,selected:x}=n,C=le(n,je),M="rtl"===j().direction,S=oe({},n,{defaultExpanded:c,defaultSelected:f,disabledItemsFocusable:d,disableSelection:p,multiSelect:g}),E=(e=>{const{classes:t}=e;return me({root:["root"]},Te,t)})(S),D=Y(b),P=e.useRef(null),U=X(P,r),[k,N]=e.useState(null),_=e.useRef({}),R=e.useRef({}),[A,F]=H({controlled:m,default:c,name:"TreeView",state:"expanded"}),[B,L]=H({controlled:x,default:f,name:"TreeView",state:"selected"}),W=e.useCallback((e=>!!Array.isArray(A)&&-1!==A.indexOf(e)),[A]),K=e.useCallback((e=>_.current[e]&&_.current[e].expandable),[]),$=e.useCallback((e=>Array.isArray(B)?-1!==B.indexOf(e):B===e),[B]),V=e.useCallback((e=>{let t=_.current[e];if(!t)return!1;if(t.disabled)return!0;for(;null!=t.parentId;)if(t=_.current[t.parentId],t.disabled)return!0;return!1}),[]),z=e=>Object.keys(_.current).map((e=>_.current[e])).filter((t=>t.parentId===e)).sort(((e,t)=>e.index-t.index)).map((e=>e.id)),q=e=>{let t=z(e);return d||(t=t.filter((e=>!V(e)))),t},J=e=>{if(W(e)&&q(e).length>0)return q(e)[0];let t=_.current[e];for(;null!=t;){const e=q(t.parentId),r=e[e.indexOf(t.id)+1];if(r)return r;t=_.current[t.parentId]}return null},Q=e=>{const t=_.current[e],r=q(t.parentId),n=r.indexOf(e);if(0===n)return t.parentId;let a=r[n-1];for(;W(a)&&q(a).length>0;)a=q(a).pop();return a},Z=()=>{let e=q(null).pop();for(;W(e);)e=q(e).pop();return e},ee=()=>q(null)[0],te=(e,t)=>{const[r,n]=((e,t)=>{if(e===t)return[e,t];const r=_.current[e],n=_.current[t];if(r.parentId===n.id||n.parentId===r.id)return n.parentId===r.id?[r.id,n.id]:[n.id,r.id];const a=[r.id],o=[n.id];let l=r.parentId,i=n.parentId,c=-1!==o.indexOf(l),s=-1!==a.indexOf(i),u=!0,f=!0;for(;!s&&!c;)u&&(a.push(l),c=-1!==o.indexOf(l),u=null!==l,!c&&u&&(l=_.current[l].parentId)),f&&!c&&(o.push(i),s=-1!==a.indexOf(i),f=null!==i,!s&&f&&(i=_.current[i].parentId));const d=c?l:i,p=z(d),m=a[a.indexOf(d)-1],b=o[o.indexOf(d)-1];return p.indexOf(m)<p.indexOf(b)?[e,t]:[t,e]})(e,t),a=[r];let o=r;for(;o!==n;)o=J(o),a.push(o);return a},re=(e,t)=>{t&&(N(t),O&&O(e,t))},ne=(e,t)=>re(e,J(t)),ae=(e,t=k)=>{let r;r=-1!==A.indexOf(t)?A.filter((e=>e!==t)):[t].concat(A),w&&w(e,r),F(r)},ie=e.useRef(null),se=e.useRef(!1),ue=e.useRef([]),fe=(e,t,r=!1)=>!!t&&(r?((e,t)=>{let r;r=-1!==B.indexOf(t)?B.filter((e=>e!==t)):[t].concat(B),I&&I(e,r),L(r)})(e,t):((e,t)=>{const r=g?[t]:t;I&&I(e,r),L(r)})(e,t),ie.current=t,se.current=!1,ue.current=[],!0),de=(e,t,r=!1)=>{const{start:n=ie.current,end:a,current:o}=t;r?((e,t)=>{let r=B.slice();const{start:n,next:a,current:o}=t;a&&o&&(-1===ue.current.indexOf(o)&&(ue.current=[]),se.current?-1!==ue.current.indexOf(a)?(r=r.filter((e=>e===n||e!==o)),ue.current=ue.current.filter((e=>e===n||e!==o))):(r.push(a),ue.current.push(a)):(r.push(a),ue.current.push(o,a)),I&&I(e,r),L(r))})(e,{start:n,next:a,current:o}):null!=n&&null!=a&&((e,t)=>{let r=B.slice();const{start:n,end:a}=t;se.current&&(r=r.filter((e=>-1===ue.current.indexOf(e))));let o=te(n,a);o=o.filter((e=>!V(e))),ue.current=o;let l=r.concat(o);l=l.filter(((e,t)=>l.indexOf(e)===t)),I&&I(e,l),L(l)})(e,{start:n,end:a}),se.current=!0},pe=e.useCallback((e=>{const{id:t,index:r,parentId:n,expandable:a,idAttribute:o,disabled:l}=e;_.current[t]={id:t,index:r,parentId:n,expandable:a,idAttribute:o,disabled:l}}),[]),ge=e.useCallback((e=>{const t=oe({},_.current);delete t[e],_.current=t,N((t=>t===e&&P.current===G(P.current).activeElement?z(null)[0]:t))}),[]),ye=e.useCallback(((e,t)=>{R.current[e]=t}),[]),he=e.useCallback((e=>{const t=oe({},R.current);delete t[e],R.current=t}),[]),ve=e=>(K(k)&&(W(k)?ne(e,k):V(k)||ae(e)),!0),Oe=e=>{if(W(k)&&!V(k))return ae(e,k),!0;const t=(r=k,_.current[r].parentId);var r;return!!t&&(re(e,t),!0)},Ie=_.current[k]?_.current[k].idAttribute:null;return be.exports.jsx(Ce.Provider,{value:{icons:{defaultCollapseIcon:l,defaultExpandIcon:s,defaultParentIcon:u,defaultEndIcon:i},focus:re,toggleExpansion:ae,isExpanded:W,isExpandable:K,isFocused:e=>k===e,isSelected:$,isDisabled:V,selectNode:p?Ne:fe,selectRange:p?Ne:de,multiSelect:g,disabledItemsFocusable:d,mapFirstChar:ye,unMapFirstChar:he,registerNode:pe,unregisterNode:ge,treeId:D},children:be.exports.jsx(Pe,{children:be.exports.jsx(Ue,oe({role:"tree",id:D,"aria-activedescendant":Ie,"aria-multiselectable":g,className:ce(E.root,o),ref:U,tabIndex:0,onKeyDown:e=>{let t=!1;const r=e.key;if(e.altKey||e.currentTarget!==e.target||!k)return;const n=e.ctrlKey||e.metaKey;switch(r){case" ":p||V(k)||(g&&e.shiftKey?(de(e,{end:k}),t=!0):t=g?fe(e,k,!0):fe(e,k)),e.stopPropagation();break;case"Enter":V(k)||(K(k)?(ae(e),t=!0):t=g?fe(e,k,!0):fe(e,k)),e.stopPropagation();break;case"ArrowDown":g&&e.shiftKey&&!p&&((e,t)=>{V(J(t))||de(e,{end:J(t),current:t},!0)})(e,k),ne(e,k),t=!0;break;case"ArrowUp":g&&e.shiftKey&&!p&&((e,t)=>{V(Q(t))||de(e,{end:Q(t),current:t},!0)})(e,k),((e,t)=>{re(e,Q(t))})(e,k),t=!0;break;case"ArrowRight":t=M?Oe(e):ve(e);break;case"ArrowLeft":t=M?ve(e):Oe(e);break;case"Home":g&&n&&e.shiftKey&&!p&&!V(k)&&((e,t)=>{ie.current||(ie.current=t);const r=se.current?ie.current:t;de(e,{start:r,end:ee()})})(e,k),(e=>{re(e,ee())})(e),t=!0;break;case"End":g&&n&&e.shiftKey&&!p&&!V(k)&&((e,t)=>{ie.current||(ie.current=t);const r=se.current?ie.current:t;de(e,{start:r,end:Z()})})(e,k),(e=>{re(e,Z())})(e),t=!0;break;default:"*"===r?(((e,t)=>{const r=_.current[t],n=z(r.parentId).filter((e=>K(e)&&!W(e))),a=A.concat(n);n.length>0&&(F(a),w&&w(e,a))})(e,k),t=!0):g&&n&&"a"===r.toLowerCase()&&!p?((e=>{de(e,{start:ee(),end:Z()})})(e),t=!0):!n&&!e.shiftKey&&((a=r)&&1===a.length&&a.match(/\S/))&&(((e,t,r)=>{let n,a;const o=r.toLowerCase(),l=[],i=[];Object.keys(R.current).forEach((e=>{const t=R.current[e],r=_.current[e],n=!r.parentId||W(r.parentId),a=!d&&V(e);n&&!a&&(l.push(e),i.push(t))})),n=l.indexOf(t)+1,n>=l.length&&(n=0),a=ke(i,n,o),-1===a&&(a=ke(i,0,o)),a>-1&&re(e,l[a])})(e,k,r),t=!0)}var a;t&&(e.preventDefault(),e.stopPropagation()),v&&v(e)},onFocus:e=>{if(e.target===e.currentTarget){const t=Array.isArray(B)?B[0]:B;re(e,t||q(null)[0])}h&&h(e)},onBlur:e=>{N(null),y&&y(e)},ownerState:S},C,{children:a}))})})}));const Fe=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"];var Be=e.forwardRef((function(t,r){const{classes:n,className:a,displayIcon:o,expansionIcon:l,icon:i,label:c,nodeId:s,onClick:u,onMouseDown:f}=t,d=le(t,Fe),{disabled:p,expanded:m,selected:b,focused:g,handleExpansion:y,handleSelection:h,preventSelection:v}=function(t){const{focus:r,isExpanded:n,isExpandable:a,isFocused:o,isDisabled:l,isSelected:i,multiSelect:c,selectNode:s,selectRange:u,toggleExpansion:f}=e.useContext(Ce),d=!!a&&a(t),p=!!n&&n(t),m=!!o&&o(t),b=!!l&&l(t),g=!!i&&i(t);return{disabled:b,expanded:p,selected:g,focused:m,handleExpansion:e=>{if(!b){m||r(e,t);const a=c&&(e.shiftKey||e.ctrlKey||e.metaKey);!d||a&&n(t)||f(e,t)}},handleSelection:e=>{b||(m||r(e,t),c&&(e.shiftKey||e.ctrlKey||e.metaKey)?e.shiftKey?u(e,{end:t}):s(e,t,!0):s(e,t))},preventSelection:e=>{(e.shiftKey||e.ctrlKey||e.metaKey||b)&&e.preventDefault()}}}(s),O=i||l||o;return be.exports.jsxs("div",oe({className:ce(a,n.root,m&&n.expanded,b&&n.selected,g&&n.focused,p&&n.disabled),onClick:e=>{y(e),h(e),u&&u(e)},onMouseDown:e=>{v(e),f&&f(e)},ref:r},d,{children:[be.exports.jsx("div",{className:n.iconContainer,children:O}),be.exports.jsx("div",{className:n.label,children:c})]}))}));function Le(e){return K("MuiTreeItem",e)}var We=$("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]);const Ye=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],Xe=P("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),He=P(Be,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${We.iconContainer}`]:t.iconContainer},t.label&&{[`& .${We.label}`]:t.label}]})((({theme:e})=>({padding:"0 8px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${We.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${We.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${We.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:U(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:U(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:U(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${We.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:U(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${We.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${We.label}`]:oe({width:"100%",minWidth:0,paddingLeft:4,position:"relative"},e.typography.body1)}))),Ge=P(V,{name:"MuiTreeItem",slot:"Group",overridesResolver:(e,t)=>t.group})({margin:0,padding:0,marginLeft:17});var Ke=e.forwardRef((function(t,r){const n=T({props:t,name:"MuiTreeItem"}),{children:a,className:o,collapseIcon:l,ContentComponent:i=Be,ContentProps:c,endIcon:s,expandIcon:u,disabled:f,icon:d,id:p,label:m,nodeId:b,onClick:g,onMouseDown:y,TransitionComponent:h=V,TransitionProps:v}=n,O=le(n,Ye),{icons:I={},focus:w,isExpanded:x,isFocused:C,isSelected:M,isDisabled:S,multiSelect:E,disabledItemsFocusable:D,mapFirstChar:P,unMapFirstChar:j,registerNode:U,unregisterNode:k,treeId:N}=e.useContext(Ce);let _=null;null!=p?_=p:N&&b&&(_=`${N}-${b}`);const[R,A]=e.useState(null),F=e.useRef(null),B=X(A,r),L=e.useMemo((()=>({element:R,id:b})),[b,R]),{index:W,parentId:Y}=De(L),H=Boolean(Array.isArray(a)?a.length:a),K=!!x&&x(b),$=!!C&&C(b),z=!!M&&M(b),q=!!S&&S(b),J=oe({},n,{expanded:K,focused:$,selected:z,disabled:q}),Q=(e=>{const{classes:t}=e;return me({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},Le,t)})(J);let Z,ee,te;return H&&(ee=K?l||I.defaultCollapseIcon:u||I.defaultExpandIcon),Z=H?I.defaultParentIcon:s||I.defaultEndIcon,e.useEffect((()=>{if(U&&k&&-1!==W)return U({id:b,idAttribute:_,index:W,parentId:Y,expandable:H,disabled:f}),()=>{k(b)}}),[U,k,Y,W,b,H,f,_]),e.useEffect((()=>{if(P&&j&&m)return P(b,F.current.textContent.substring(0,1).toLowerCase()),()=>{j(b)}}),[P,j,b,m]),E?te=z:z&&(te=!0),be.exports.jsxs(Xe,oe({className:ce(Q.root,o),role:"treeitem","aria-expanded":H?K:null,"aria-selected":te,"aria-disabled":q||null,ref:B,id:_,tabIndex:-1},O,{ownerState:J,onFocus:function(e){e.target===e.currentTarget&&G(e.target).getElementById(N).focus({preventScroll:!0});const t=!D&&q;$||e.currentTarget!==e.target||t||w(e,b)},children:[be.exports.jsx(He,oe({as:i,ref:F,classes:{root:Q.content,expanded:Q.expanded,selected:Q.selected,focused:Q.focused,disabled:Q.disabled,iconContainer:Q.iconContainer,label:Q.label},label:m,nodeId:b,onClick:g,onMouseDown:y,icon:d,expansionIcon:ee,displayIcon:Z,ownerState:J},c)),a&&be.exports.jsx(Pe,{id:b,children:be.exports.jsx(Ge,oe({as:h,unmountOnExit:!0,className:Q.group,in:K,component:"ul",role:"group"},v,{children:a}))})]}))})),$e=P((function(e){return a.createElement(x,Z({},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:U(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function Ve(e){var t=e.anchorEl,r=e.position,n=e.onMenuClose,o=e.onCreateFolder,l=e.onRenameFolder,i=e.onContextMenu,c=Boolean(t),s=r.pageX,u=r.pageY;function f(e){"Tab"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n())}var d=function(e){t.current&&t.current.contains(e.target)||n()};return a.createElement("div",null,a.createElement($e,{anchorEl:{getBoundingClientRect:function(){return{x:s,y:u,width:0,height:0,top:u,right:s,bottom:u,left:s}}},open:c,onClose:n,onContextMenu:function(e){return i(e)},role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,r=e.placement;return a.createElement(M,Z({},t,{style:{transformOrigin:"bottom-start"===r?"left top":"left bottom"}}),a.createElement(h,null,a.createElement(S,{onClickAway:d},a.createElement(C,{autoFocusItem:c,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:f},a.createElement(w,{onClick:o,disableRipple:!0},a.createElement(E,null),"Create new folder"),a.createElement(w,{onClick:l,disableRipple:!0},a.createElement(D,null),"Rename")))))})))}var ze=P(A)((function(e){return e.theme,{textTransform:"none",minWidth:"120px"}})),qe=P(ze)((function(e){return e.theme,{}})),Je=P(ze)((function(e){return e.theme,{}})),Qe={exports:{}},Ze={},et=ue(se),tt={},rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},rt.findInArray=function(e,t){for(var r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},rt.int=function(e){return parseInt(e,10)},rt.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},rt.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.browserPrefixToKey=lt,nt.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},nt.default=void 0,nt.getPrefix=ot;var at=["Moz","Webkit","O","ms"];function ot(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var n=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!n)return"";if(r in n)return"";for(var a=0;a<at.length;a++)if(lt(r,at[a])in n)return at[a];return""}function lt(e,t){return t?"".concat(t).concat(function(e){for(var t="",r=!0,n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}var it=ot();function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}nt.default=it,Object.defineProperty(tt,"__esModule",{value:!0}),tt.addClassName=ht,tt.addEvent=function(e,t,r,n){if(!e)return;var a=pt({capture:!0},n);e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},tt.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&ht(e.body,"react-draggable-transparent-selection")},tt.createCSSTransform=function(e,t){var r=yt(e,t,"px");return mt({},(0,ut.browserPrefixToKey)("transform",ut.default),r)},tt.createSVGTransform=function(e,t){return yt(e,t,"")},tt.getTouch=function(e,t){return e.targetTouches&&(0,st.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,st.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},tt.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},tt.getTranslation=yt,tt.innerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,st.int)(r.paddingTop),t-=(0,st.int)(r.paddingBottom)},tt.innerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,st.int)(r.paddingLeft),t-=(0,st.int)(r.paddingRight)},tt.matchesSelector=gt,tt.matchesSelectorAndParentsTo=function(e,t,r){var n=e;do{if(gt(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},tt.offsetXYFromParent=function(e,t,r){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-n.left)/r,o=(e.clientY+t.scrollTop-n.top)/r;return{x:a,y:o}},tt.outerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,st.int)(r.borderTopWidth),t+=(0,st.int)(r.borderBottomWidth)},tt.outerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,st.int)(r.borderLeftWidth),t+=(0,st.int)(r.borderRightWidth)},tt.removeClassName=vt,tt.removeEvent=function(e,t,r,n){if(!e)return;var a=pt({capture:!0},n);e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},tt.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&vt(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var st=rt,ut=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==ct(e)&&"function"!=typeof e)return{default:e};var r=ft(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(nt);function ft(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(ft=function(e){return e?r:t})(e)}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bt="";function gt(e,t){return bt||(bt=(0,st.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,st.isFunction)(e[t])}))),!!(0,st.isFunction)(e[bt])&&e[bt](t)}function yt(e,t,r){var n=e.x,a=e.y,o="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){var l="".concat("string"==typeof t.x?t.x:t.x+r),i="".concat("string"==typeof t.y?t.y:t.y+r);o="translate(".concat(l,", ").concat(i,")")+o}return o}function ht(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function vt(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Ot.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Ot.createCoreData=function(e,t,r){var n=e.state,a=!(0,It.isNum)(n.lastX),o=xt(e);return a?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:t,y:r}},Ot.createDraggableData=function(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},Ot.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];var n=e.props.bounds;n="string"==typeof n?n:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(n);var a=xt(e);if("string"==typeof n){var o,l=a.ownerDocument,i=l.defaultView;if(!((o="parent"===n?a.parentNode:l.querySelector(n))instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');var c=o,s=i.getComputedStyle(a),u=i.getComputedStyle(c);n={left:-a.offsetLeft+(0,It.int)(u.paddingLeft)+(0,It.int)(s.marginLeft),top:-a.offsetTop+(0,It.int)(u.paddingTop)+(0,It.int)(s.marginTop),right:(0,wt.innerWidth)(c)-(0,wt.outerWidth)(a)-a.offsetLeft+(0,It.int)(u.paddingRight)-(0,It.int)(s.marginRight),bottom:(0,wt.innerHeight)(c)-(0,wt.outerHeight)(a)-a.offsetTop+(0,It.int)(u.paddingBottom)-(0,It.int)(s.marginBottom)}}(0,It.isNum)(n.right)&&(t=Math.min(t,n.right));(0,It.isNum)(n.bottom)&&(r=Math.min(r,n.bottom));(0,It.isNum)(n.left)&&(t=Math.max(t,n.left));(0,It.isNum)(n.top)&&(r=Math.max(r,n.top));return[t,r]},Ot.getControlPosition=function(e,t,r){var n="number"==typeof t?(0,wt.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;var a=xt(r),o=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,wt.offsetXYFromParent)(n||e,o,r.props.scale)},Ot.snapToGrid=function(e,t,r){var n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]};var It=rt,wt=tt;function xt(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Ct={},Mt={};function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.default=function(){},Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=void 0;var Et=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==St(e)&&"function"!=typeof e)return{default:e};var r=_t(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(a),Dt=Nt(fe.exports),Pt=Nt(F),Tt=tt,jt=Ot,Ut=rt,kt=Nt(Mt);function Nt(e){return e&&e.__esModule?e:{default:e}}function _t(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_t=function(e){return e?r:t})(e)}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t){return Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Lt(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ht(e);if(t){var a=Ht(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Yt(this,r)}}function Yt(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xt(e)}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt={start:"touchstart",move:"touchmove",stop:"touchend"},$t={start:"mousedown",move:"mousemove",stop:"mouseup"},Vt=$t,zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lt(e,t)}(o,Et.Component);var t,r,n,a=Wt(o);function o(){var e;Ft(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gt(Xt(e=a.call.apply(a,[this].concat(r))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Gt(Xt(e),"mounted",!1),Gt(Xt(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var r=e.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=r.ownerDocument;if(!(e.props.disabled||!(t.target instanceof n.defaultView.Node)||e.props.handle&&!(0,Tt.matchesSelectorAndParentsTo)(t.target,e.props.handle,r)||e.props.cancel&&(0,Tt.matchesSelectorAndParentsTo)(t.target,e.props.cancel,r))){"touchstart"===t.type&&t.preventDefault();var a=(0,Tt.getTouchIdentifier)(t);e.setState({touchIdentifier:a});var o=(0,jt.getControlPosition)(t,a,Xt(e));if(null!=o){var l=o.x,i=o.y,c=(0,jt.createCoreData)(Xt(e),l,i);(0,kt.default)("DraggableCore: handleDragStart: %j",c),(0,kt.default)("calling",e.props.onStart),!1!==e.props.onStart(t,c)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Tt.addUserSelectStyles)(n),e.setState({dragging:!0,lastX:l,lastY:i}),(0,Tt.addEvent)(n,Vt.move,e.handleDrag),(0,Tt.addEvent)(n,Vt.stop,e.handleDragStop))}}})),Gt(Xt(e),"handleDrag",(function(t){var r=(0,jt.getControlPosition)(t,e.state.touchIdentifier,Xt(e));if(null!=r){var n=r.x,a=r.y;if(Array.isArray(e.props.grid)){var o=n-e.state.lastX,l=a-e.state.lastY,i=Rt((0,jt.snapToGrid)(e.props.grid,o,l),2);if(o=i[0],l=i[1],!o&&!l)return;n=e.state.lastX+o,a=e.state.lastY+l}var c=(0,jt.createCoreData)(Xt(e),n,a);if((0,kt.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:n,lastY:a});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var s=document.createEvent("MouseEvents");s.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(s)}}})),Gt(Xt(e),"handleDragStop",(function(t){if(e.state.dragging){var r=(0,jt.getControlPosition)(t,e.state.touchIdentifier,Xt(e));if(null!=r){var n=r.x,a=r.y;if(Array.isArray(e.props.grid)){var o=n-e.state.lastX||0,l=a-e.state.lastY||0,i=Rt((0,jt.snapToGrid)(e.props.grid,o,l),2);o=i[0],l=i[1],n=e.state.lastX+o,a=e.state.lastY+l}var c=(0,jt.createCoreData)(Xt(e),n,a);if(!1===e.props.onStop(t,c)||!1===e.mounted)return!1;var s=e.findDOMNode();s&&e.props.enableUserSelectHack&&(0,Tt.removeUserSelectStyles)(s.ownerDocument),(0,kt.default)("DraggableCore: handleDragStop: %j",c),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),s&&((0,kt.default)("DraggableCore: Removing handlers"),(0,Tt.removeEvent)(s.ownerDocument,Vt.move,e.handleDrag),(0,Tt.removeEvent)(s.ownerDocument,Vt.stop,e.handleDragStop))}}})),Gt(Xt(e),"onMouseDown",(function(t){return Vt=$t,e.handleDragStart(t)})),Gt(Xt(e),"onMouseUp",(function(t){return Vt=$t,e.handleDragStop(t)})),Gt(Xt(e),"onTouchStart",(function(t){return Vt=Kt,e.handleDragStart(t)})),Gt(Xt(e),"onTouchEnd",(function(t){return Vt=Kt,e.handleDragStop(t)})),e}return t=o,r=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Tt.addEvent)(e,Kt.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Tt.removeEvent)(t,$t.move,this.handleDrag),(0,Tt.removeEvent)(t,Kt.move,this.handleDrag),(0,Tt.removeEvent)(t,$t.stop,this.handleDragStop),(0,Tt.removeEvent)(t,Kt.stop,this.handleDragStop),(0,Tt.removeEvent)(e,Kt.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Tt.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current:Pt.default.findDOMNode(this)}},{key:"render",value:function(){return Et.cloneElement(Et.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}],r&&Bt(t.prototype,r),n&&Bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();Ct.default=zt,Gt(zt,"displayName","DraggableCore"),Gt(zt,"propTypes",{allowAnyClick:Dt.default.bool,disabled:Dt.default.bool,enableUserSelectHack:Dt.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Dt.default.arrayOf(Dt.default.number),handle:Dt.default.string,cancel:Dt.default.string,nodeRef:Dt.default.object,onStart:Dt.default.func,onDrag:Dt.default.func,onStop:Dt.default.func,onMouseDown:Dt.default.func,scale:Dt.default.number,className:Ut.dontSetMe,style:Ut.dontSetMe,transform:Ut.dontSetMe}),Gt(zt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=m(r);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(a),n=p(fe.exports),o=p(F),l=p(et),i=tt,c=Ot,s=rt,u=p(Ct),f=p(Mt),d=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var a=S(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(p,e);var t,n,a,s=x(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),E(M(t=s.call(this,e)),"onDragStart",(function(e,r){if((0,f.default)("Draggable: onDragStart: %j",r),!1===t.props.onStart(e,(0,c.createDraggableData)(M(t),r)))return!1;t.setState({dragging:!0,dragged:!0})})),E(M(t),"onDrag",(function(e,r){if(!t.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",r);var n=(0,c.createDraggableData)(M(t),r),a={x:n.x,y:n.y};if(t.props.bounds){var o=a.x,l=a.y;a.x+=t.state.slackX,a.y+=t.state.slackY;var i=v((0,c.getBoundPosition)(M(t),a.x,a.y),2),s=i[0],u=i[1];a.x=s,a.y=u,a.slackX=t.state.slackX+(o-a.x),a.slackY=t.state.slackY+(l-a.y),n.x=a.x,n.y=a.y,n.deltaX=a.x-t.state.x,n.deltaY=a.y-t.state.y}if(!1===t.props.onDrag(e,n))return!1;t.setState(a)})),E(M(t),"onDragStop",(function(e,r){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(M(t),r)))return!1;(0,f.default)("Draggable: onDragStop: %j",r);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var a=t.props.position,o=a.x,l=a.y;n.x=o,n.y=l}t.setState(n)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:h({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=p,a=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.position,n=t.prevPropsPosition;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:h({},r)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var n=t.children,a=t.defaultPosition,o=t.defaultClassName,s=t.defaultClassNameDragging,f=t.defaultClassNameDragged,p=t.position,m=t.positionOffset;t.scale;var y=g(t,d),v={},O=null,I=!Boolean(p)||this.state.dragging,w=p||a,x={x:(0,c.canDragX)(this)&&I?this.state.x:w.x,y:(0,c.canDragY)(this)&&I?this.state.y:w.y};this.state.isElementSVG?O=(0,i.createSVGTransform)(x,m):v=(0,i.createCSSTransform)(x,m);var C=(0,l.default)(n.props.className||"",o,(E(e={},s,this.state.dragging),E(e,f,this.state.dragged),e));return r.createElement(u.default,b({},y,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:C,style:h(h({},n.props.style),v),transform:O}))}}])&&I(t.prototype,n),a&&I(t,a),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component);e.default=D,E(D,"displayName","Draggable"),E(D,"propTypes",h(h({},u.default.propTypes),{},{axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),E(D,"defaultProps",h(h({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(Ze);var qt=Ze.default,Jt=Ze.DraggableCore;Qe.exports=qt,Qe.exports.default=qt,Qe.exports.DraggableCore=Jt;var Qt=P(B)((function(e){var t=e.theme;return{"& .MuiPaper-root":{width:"45%"},"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function Zt(e){return a.createElement(Qe.exports,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},a.createElement(h,Z({},e)))}function er(e){return a.createElement(Qt,Z({maxWidth:"md",PaperComponent:Zt},e))}var tr=function(e){return new Promise((function(t,r){craftercms.utils.ajax.get(e).subscribe((function(e){t(e)}))}))},rr=function(e,t,r){return new Promise((function(n,a){craftercms.utils.ajax.post(e,t,r).subscribe((function(e){n(e)}))}))},nr={origin:function(){return window.location.origin},siteId:function(){return craftercms.getStore().getState().sites.active},getSelectedItem:function(){if(!craftercms.getStore().getState().preview.guest)return null;var e=craftercms.getStore().getState().preview.guest.path;if(!e)return null;var t=craftercms.getStore().getState().content.itemsByPath[e];return t?{name:t.label,path:t.path,contentType:t.contentTypeId}:null},openEditForm:function(e,t){var r=nr.siteId(),n=craftercms.getStore().getState().env.authoringBase;return craftercms.getStore().dispatch({type:"SHOW_EDIT_DIALOG",payload:{site:r,path:t,type:"form",authoringBase:n,isHidden:!1,onSaveSuccess:{type:"BATCH_ACTIONS",payload:[{type:"DISPATCH_DOM_EVENT",payload:{id:"editDialogSuccess"}},{type:"SHOW_EDIT_ITEM_SUCCESS_NOTIFICATION"},{type:"CLOSE_EDIT_DIALOG"}]},onCancel:{type:"BATCH_ACTIONS",payload:[{type:"CLOSE_EDIT_DIALOG"},{type:"DISPATCH_DOM_EVENT",payload:{id:"editDialogDismissed"}}]}}})},getChildrenPaths:function(e){return ee(this,void 0,void 0,(function(){var t,r;return te(this,(function(n){switch(n.label){case 0:return t="".concat(nr.origin()).concat("/studio/api/1/services/api/1/content/get-items-tree.json","?site=").concat(nr.siteId(),"&path=").concat(e,"&depth=1"),[4,tr(t)];case 1:return 200===(r=n.sent()).status?[2,r.response.item.children.filter((function(t){return t.path!==e})).map((function(e){return e.path}))]:[2,[]]}}))}))},getItem:function(e){return ee(this,void 0,void 0,(function(){var t,r;return te(this,(function(n){switch(n.label){case 0:return t="".concat(nr.origin()).concat("/studio/api/1/services/api/1/content/get-item.json","?site=").concat(nr.siteId(),"&path=").concat(e,"&populateDependencies=false"),[4,tr(t)];case 1:return 200===(r=n.sent()).status?[2,r.response]:[2,null]}}))}))},copyItem:function(e,t){return ee(this,void 0,void 0,(function(){var r,n,a,o;return te(this,(function(l){switch(l.label){case 0:return r="".concat(nr.origin()).concat("/studio/api/2/content/paste"),n={},a={siteId:nr.siteId(),operation:"COPY",targetPath:t,item:{path:e}},[4,rr(r,a,n)];case 1:return 200===(o=l.sent()).status?[2,o.response]:[2,null]}}))}))},createFolder:function(e,t){return ee(this,void 0,void 0,(function(){var r,n;return te(this,(function(a){switch(a.label){case 0:return r="".concat(nr.origin()).concat("/studio/api/1/services/api/1/content/create-folder.json","?site=").concat(nr.siteId(),"&path=").concat(e,"&name=").concat(t),"",[4,rr(r,"",{})];case 1:return 200===(n=a.sent()).status?[2,n.response]:[2,!1]}}))}))},renameFolder:function(e,t){return ee(this,void 0,void 0,(function(){var r,n;return te(this,(function(a){switch(a.label){case 0:return r="".concat(nr.origin()).concat("/studio/api/1/services/api/1/content/rename-folder.json","?site=").concat(nr.siteId(),"&path=").concat(e,"&name=").concat(t),"",[4,rr(r,"",{})];case 1:return 200===(n=a.sent()).status?[2,n.response]:[2,!1]}}))}))}};function ar(e){var r=this,n=e.open,o=e.onClose,l=e.path,i=t(""),s=i[0],u=i[1],f=t(!1),d=f[0],p=f[1],m=function(){u(""),o()};return a.createElement("div",null,a.createElement(er,{open:n,onClose:m,"aria-labelledby":"draggable-dialog-title"},a.createElement(_,{style:{cursor:"move"},id:"draggable-dialog-title"},"Create a New Folder"),a.createElement(N,null,a.createElement(R,null,"Parent path: ",l,a.createElement("br",null),"Please enter a folder name."),a.createElement(k,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",type:"text",fullWidth:!0,variant:"standard",value:s,onChange:function(e){return u(e.target.value.trim())}})),a.createElement(c,null,a.createElement(Je,{variant:"outlined",color:"primary",onClick:m},"Cancel"),a.createElement(qe,{variant:"contained",color:"primary",onClick:function(){return ee(r,void 0,void 0,(function(){var e;return te(this,(function(t){switch(t.label){case 0:return s&&l?(p(!0),[4,nr.createFolder(l,s)]):[3,2];case 1:e=t.sent(),u(""),o(e),p(!1),t.label=2;case 2:return[2]}}))}))},disabled:!s||d},"Create"))))}function or(e){var n=this,o=e.open,l=e.onClose,i=e.path,s=t(""),u=s[0],f=s[1],d=t(!1),p=d[0],m=d[1];r((function(){i&&f(i.split("/").pop())}),[i]);var b=function(){l()};return a.createElement("div",null,a.createElement(er,{open:o,onClose:b,"aria-labelledby":"draggable-dialog-title"},a.createElement(_,{style:{cursor:"move"},id:"draggable-dialog-title"},"Rename Folder"),a.createElement(N,null,a.createElement(R,null,"Current path: ",i,a.createElement("br",null),"Please provide a new folder name."),a.createElement(k,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",type:"text",fullWidth:!0,variant:"standard",value:u,onChange:function(e){return f(e.target.value.trim())}})),a.createElement(c,null,a.createElement(Je,{variant:"outlined",color:"primary",onClick:b},"Cancel"),a.createElement(qe,{variant:"contained",color:"primary",onClick:function(){return ee(n,void 0,void 0,(function(){var e;return te(this,(function(t){switch(t.label){case 0:return u&&i?(m(!0),[4,nr.renameFolder(i,u)]):[3,2];case 1:e=t.sent(),l(e),m(!1),t.label=2;case 2:return[2]}}))}))},disabled:!u||p},"Rename"))))}var lr=new L;function ir(e){var n=this,o=e.rootDir,l=t({}),i=l[0],c=l[1],s=t([]),u=s[0],f=s[1],w=t(""),x=w[0],C=w[1],M=t(null),S=M[0],E=M[1],D=t({}),P=D[0],T=D[1],j=t(!1),U=j[0],k=j[1],N=t(!1),_=N[0],R=N[1],A=function(e,t){return ee(n,void 0,void 0,(function(){var r,n,a;return te(this,(function(l){switch(l.label){case 0:return e?(r=function(e,t){for(var r=e.split("/").filter((function(e){return!!e})),n=[],a="",l=o,i=0;i<r.length;i+=1)(a=0===i?"/".concat(r[i]):"".concat(a,"/").concat(r[i])).indexOf(l)>=0&&n.push(a);for(var c={},s=function(){var e=n.shift();if(t.id===e)return c=t,"continue";c=c.children.find((function(t){return t.id===e}))};n.length>0;)s();return c}(e,i),!t&&r.children.length>0?[2]:[4,nr.getChildrenPaths(e)]):[2];case 1:return n=l.sent(),a=n.map((function(e){return{id:e,name:e.split("/").pop(),children:[]}})),r.children=a,c(Object.assign({},i)),[2]}}))}))};r((function(){!function(){ee(this,void 0,void 0,(function(){var e,t;return te(this,(function(r){switch(r.label){case 0:return[4,nr.getChildrenPaths(o)];case 1:return e=r.sent(),t=e.map((function(e){return{id:e,name:e.split("/").pop(),children:[]}})),c({id:o,name:o.split("/").pop(),children:t}),[2]}}))}))}()}),[]);var F=function(e){return e.id?a.createElement(Ke,{key:e.id,nodeId:e.id,label:e.name,onContextMenu:function(t){return B(t,e.id)}},Array.isArray(e.children)&&e.children.length>0?e.children.map((function(e){return F(e)})):a.createElement(Ke,{nodeId:"empty-tree"})):a.createElement(Ke,{nodeId:"empty-tree"})},B=function(e,t){e.stopPropagation(),e.preventDefault(),C(t),E(e.currentTarget),T({pageX:e.pageX,pageY:e.pageY,path:t})};return a.createElement(a.Fragment,null,a.createElement(v,{container:!0,sx:{padding:"15px"}},a.createElement(m,{component:h,sx:{marginBottom:"15px"}},a.createElement(d,{sx:{minWidth:650},"aria-label":"destination path table"},a.createElement(b,null,a.createElement(g,null,a.createElement(y,null,"Destination Path"))),a.createElement(p,null,a.createElement(g,{key:x||"root"},a.createElement(y,{component:"th",scope:"row"},x||"Select a destination path"))))),a.createElement(Ae,{defaultCollapseIcon:a.createElement(O,null),defaultExpandIcon:a.createElement(I,null),defaultExpanded:[o],expanded:u,selected:x,onNodeToggle:function(e,t){f(t)},onNodeSelect:function(e,t){return ee(n,void 0,void 0,(function(){return te(this,(function(e){return C(t),lr.next(t),A(t,!1),[2]}))}))},sx:{height:"calc(90vh - 64px - 1px - 140px - 110px - 30px - 64px - 15px)",flexGrow:1,maxWidth:"100%",overflowY:"auto"}},F(i)),a.createElement(Ve,{anchorEl:S,onMenuClose:function(){E(null)},position:P,onCreateFolder:function(){E(null),k(!0)},onRenameFolder:function(){E(null),R(!0)},onContextMenu:function(e){E(null),e.preventDefault()}})),a.createElement(ar,{open:U,onClose:function(e){e&&A(P.path,!0),k(!1)},path:P.path}),a.createElement(or,{open:_,onClose:function(e){if(e){var t=P.path.split("/").slice(0,-1).join("/");A(t,!0)}R(!1)},path:P.path}))}var cr=n((function(e,t){return a.createElement(i,Z({elevation:6,ref:t,variant:"filled"},e))}));function sr(){var e,r=this,n=f(),i=t({open:!1,severity:"info",message:""}),u=i[0],d=i[1],p=t(""),m=p[0],b=p[1],g=t(!1),y=g[0],h=g[1],v=nr.getSelectedItem(),O=(e=v)&&e.path&&e.path.startsWith("/site/website")?"/site/website":e&&e.path&&e.path.startsWith("/site/components")?"/site/components":null;lr.subscribe((function(e){b(e)}));var I=function(e,t){"backdropClick"!==t&&"escapeKeyDown"!==t&&(b(""),h(!1),n(ne()))},w=function(){d(Object.assign({},{open:!1,severity:u.severity,message:u.message}))},x=function(e,t){return ee(r,void 0,void 0,(function(){var r,n,a,o,l;return te(this,(function(i){switch(i.label){case 0:return e.preventDefault(),r=nr.getSelectedItem(),!y&&m&&r&&r.path?(h(!0),n=r.path,a=m,[4,nr.copyItem(n,a)]):[2];case 1:return(o=i.sent())?(l=o.items[0],t&&n&&nr.openEditForm(r.contentType,l),t||d({open:!0,severity:"success",message:"Selected files are copied to destination folder."}),h(!1),[2]):(h(!1),[2,d({open:!0,severity:"error",message:"There is an error while copying file: ".concat(n)})])}}))}))};return a.createElement(s,null,a.createElement(ae,{selectedItem:v}),a.createElement(ir,{rootDir:O}),a.createElement(c,null,a.createElement(Je,{variant:"outlined",color:"primary",onClick:function(e){return I(0,null)},disabled:y},"Close"),a.createElement(qe,{variant:"contained",color:"primary",onClick:function(e){return x(e,!1)},disabled:y||!O||!m},"Copy"),a.createElement(qe,{variant:"contained",color:"primary",onClick:function(e){x(e,!0)},disabled:y||!O||!m},"Copy and Edit")),a.createElement(o,{spacing:2,sx:{width:"100%"}},a.createElement(l,{open:u&&u.open,autoHideDuration:4e3,onClose:w},a.createElement(cr,{onClose:w,severity:u.severity,sx:{width:"100%"}},u.message))))}function ur(t){var r=t.title?t.title:"Smart Copy",n=t.icon&&t.icon.id?t.icon.id:"@mui/icons-material/ContentPasteOutlined",a=f();return e.createElement(z,{icon:{id:n},title:r,onClick:function(){return a(re({title:r,extraProps:t,widget:{id:"org.rd.plugin.smartcopy.dialog"}}))}})}function fr(t){var r=t.title?t.title:"Smart Copy",n=f();return e.createElement(J,{title:r},e.createElement(Q,{size:"large",onClick:function(){return n(re({title:r,extraProps:t,widget:{id:"org.rd.plugin.smartcopy.dialog"}}))}},e.createElement(q,null)))}var dr={locales:void 0,scripts:void 0,stylesheets:void 0,id:"org.rd.plugin.smartcopy",widgets:{"org.rd.plugin.smartcopy.dialog":sr,"org.rd.plugin.smartcopy.openSmartCopyPanelButton":ur,"org.rd.plugin.smartcopy.openSmartCopyToolbarButton":fr}};export{sr as Dialog,ur as OpenSmartCopyPanelButton,fr as OpenSmartCopyToolbarButton,dr as default};
