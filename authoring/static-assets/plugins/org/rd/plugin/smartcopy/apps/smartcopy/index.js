const e=craftercms.libs.React,{useState:t,useEffect:r,forwardRef:n}=craftercms.libs.React,a=craftercms.libs.React&&Object.prototype.hasOwnProperty.call(craftercms.libs.React,"default")?craftercms.libs.React.default:craftercms.libs.React,{CrafterThemeProvider:o}=craftercms.components,{useSelector:l,useDispatch:i}=craftercms.libs.ReactRedux,c=craftercms.libs.MaterialUI.Table&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Table,"default")?craftercms.libs.MaterialUI.Table.default:craftercms.libs.MaterialUI.Table,s=craftercms.libs.MaterialUI.TableBody&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableBody,"default")?craftercms.libs.MaterialUI.TableBody.default:craftercms.libs.MaterialUI.TableBody,u=craftercms.libs.MaterialUI.TableContainer&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableContainer,"default")?craftercms.libs.MaterialUI.TableContainer.default:craftercms.libs.MaterialUI.TableContainer,f=craftercms.libs.MaterialUI.TableHead&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableHead,"default")?craftercms.libs.MaterialUI.TableHead.default:craftercms.libs.MaterialUI.TableHead,d=craftercms.libs.MaterialUI.TableRow&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableRow,"default")?craftercms.libs.MaterialUI.TableRow.default:craftercms.libs.MaterialUI.TableRow,p=craftercms.libs.MaterialUI.TableCell&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TableCell,"default")?craftercms.libs.MaterialUI.TableCell.default:craftercms.libs.MaterialUI.TableCell,m=craftercms.libs.MaterialUI.Paper&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Paper,"default")?craftercms.libs.MaterialUI.Paper.default:craftercms.libs.MaterialUI.Paper,b=craftercms.libs.MaterialUI.Grid&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Grid,"default")?craftercms.libs.MaterialUI.Grid.default:craftercms.libs.MaterialUI.Grid,y=craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ExpandMoreOutlined"),g=craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ChevronRightOutlined"),h=craftercms.libs.MaterialUI.MenuItem&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.MenuItem,"default")?craftercms.libs.MaterialUI.MenuItem.default:craftercms.libs.MaterialUI.MenuItem,v=craftercms.libs.MaterialUI.Popper&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Popper,"default")?craftercms.libs.MaterialUI.Popper.default:craftercms.libs.MaterialUI.Popper,O=craftercms.libs.MaterialUI.MenuList&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.MenuList,"default")?craftercms.libs.MaterialUI.MenuList.default:craftercms.libs.MaterialUI.MenuList,I=craftercms.libs.MaterialUI.Grow&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Grow,"default")?craftercms.libs.MaterialUI.Grow.default:craftercms.libs.MaterialUI.Grow,w=craftercms.libs.MaterialUI.ClickAwayListener&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.ClickAwayListener,"default")?craftercms.libs.MaterialUI.ClickAwayListener.default:craftercms.libs.MaterialUI.ClickAwayListener,x=craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/CreateNewFolderOutlined"),C=craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/BorderColorOutlined"),{styled:M,useThemeProps:E,useTheme:S,alpha:D}=craftercms.libs.MaterialUI,P=craftercms.libs.MaterialUI.TextField&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.TextField,"default")?craftercms.libs.MaterialUI.TextField.default:craftercms.libs.MaterialUI.TextField,T=craftercms.libs.MaterialUI.DialogActions&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogActions,"default")?craftercms.libs.MaterialUI.DialogActions.default:craftercms.libs.MaterialUI.DialogActions,j=craftercms.libs.MaterialUI.DialogContent&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogContent,"default")?craftercms.libs.MaterialUI.DialogContent.default:craftercms.libs.MaterialUI.DialogContent,U=craftercms.libs.MaterialUI.DialogTitle&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogTitle,"default")?craftercms.libs.MaterialUI.DialogTitle.default:craftercms.libs.MaterialUI.DialogTitle,k=craftercms.libs.MaterialUI.DialogContentText&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.DialogContentText,"default")?craftercms.libs.MaterialUI.DialogContentText.default:craftercms.libs.MaterialUI.DialogContentText,N=craftercms.libs.MaterialUI.Button&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Button,"default")?craftercms.libs.MaterialUI.Button.default:craftercms.libs.MaterialUI.Button,_=craftercms.libs.ReactDOM&&Object.prototype.hasOwnProperty.call(craftercms.libs.ReactDOM,"default")?craftercms.libs.ReactDOM.default:craftercms.libs.ReactDOM,R=craftercms.libs.MaterialUI.Dialog&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Dialog,"default")?craftercms.libs.MaterialUI.Dialog.default:craftercms.libs.MaterialUI.Dialog,{Subject:A}=craftercms.libs.rxjs,{unstable_useEnhancedEffect:F,unstable_useId:B,useForkRef:L,useControlled:W,ownerDocument:Y}=craftercms.libs.MaterialUI,X=craftercms.libs.MaterialUI.generateUtilityClass&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.generateUtilityClass,"default")?craftercms.libs.MaterialUI.generateUtilityClass.default:craftercms.libs.MaterialUI.generateUtilityClass,H=craftercms.libs.MaterialUI.generateUtilityClasses&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.generateUtilityClasses,"default")?craftercms.libs.MaterialUI.generateUtilityClasses.default:craftercms.libs.MaterialUI.generateUtilityClasses,G=craftercms.libs.MaterialUI.Collapse&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Collapse,"default")?craftercms.libs.MaterialUI.Collapse.default:craftercms.libs.MaterialUI.Collapse,K=craftercms.libs.MaterialUI.Stack&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Stack,"default")?craftercms.libs.MaterialUI.Stack.default:craftercms.libs.MaterialUI.Stack,$=craftercms.libs.MaterialUI.Snackbar&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Snackbar,"default")?craftercms.libs.MaterialUI.Snackbar.default:craftercms.libs.MaterialUI.Snackbar,V=craftercms.libs.MaterialUI.Alert&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Alert,"default")?craftercms.libs.MaterialUI.Alert.default:craftercms.libs.MaterialUI.Alert,{createAction:z}=craftercms.libs.ReduxToolkit,q=craftercms.components.ToolsPanelListItemButton&&Object.prototype.hasOwnProperty.call(craftercms.components.ToolsPanelListItemButton,"default")?craftercms.components.ToolsPanelListItemButton.default:craftercms.components.ToolsPanelListItemButton,J=craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined")&&Object.prototype.hasOwnProperty.call(craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined"),"default")?craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined").default:craftercms.utils.constants.components.get("@mui/icons-material/ContentPasteOutlined"),Q=craftercms.libs.MaterialUI.Tooltip&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.Tooltip,"default")?craftercms.libs.MaterialUI.Tooltip.default:craftercms.libs.MaterialUI.Tooltip,Z=craftercms.libs.MaterialUI.IconButton&&Object.prototype.hasOwnProperty.call(craftercms.libs.MaterialUI.IconButton,"default")?craftercms.libs.MaterialUI.IconButton.default:craftercms.libs.MaterialUI.IconButton,ee=l;function te(){var e;const{path:t}=null!==(e=l((e=>e.preview.guest)))&&void 0!==e?e:{},r=ee((e=>e.content.itemsByPath));return null==r?void 0:r[t]}var re=function(t){var r,n,a=t.selectedItem,o=a?(r=a.name,n=a.path,{name:r,path:n}):null;return e.createElement(e.Fragment,null,e.createElement(b,{container:!0,sx:{padding:"15px"}},e.createElement(u,{component:m},e.createElement(c,{sx:{minWidth:650},"aria-label":"selected item table"},e.createElement(f,null,e.createElement(d,null,e.createElement(p,null,"Name"),e.createElement(p,null,"Path"))),e.createElement(s,null,o&&e.createElement(d,{key:o.name},e.createElement(p,{component:"th",scope:"row"},o.name),e.createElement(p,null,o.path)))))))},ne=function(){return ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ne.apply(this,arguments)};function ae(e,t,r,n){return new(r||(r=Promise))((function(a,o){function l(e){try{c(n.next(e))}catch(e){o(e)}}function i(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))}function oe(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function ie(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function ce(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=ce(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function se(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=ce(e))&&(n&&(n+=" "),n+=t);return n}var ue=Object.freeze({__proto__:null,clsx:se,default:se});function fe(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var de={exports:{}};function pe(){}function me(){}me.resetWarningCache=pe;function be(e,t,r){const n={};return Object.keys(e).forEach((a=>{n[a]=e[a].reduce(((e,n)=>(n&&(e.push(t(n)),r&&r[n]&&e.push(r[n])),e)),[]).join(" ")})),n}de.exports=function(){function e(e,t,r,n,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:me,resetWarningCache:pe};return r.PropTypes=r,r}();var ye={exports:{}},ge={},he=a,ve=Symbol.for("react.element"),Oe=Symbol.for("react.fragment"),Ie=Object.prototype.hasOwnProperty,we=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function Ce(e,t,r){var n,a={},o=null,l=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(l=t.ref),t)Ie.call(t,n)&&!xe.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:ve,type:e,key:o,ref:l,props:a,_owner:we.current}}ge.Fragment=Oe,ge.jsx=Ce,ge.jsxs=Ce,ye.exports=ge;var Me=e.createContext({});const Ee=["element"];const Se=e.createContext({});const De=()=>{};function Pe(t){const[,r]=e.useState(),{registerDescendant:n=De,unregisterDescendant:a=De,descendants:o=[],parentId:l=null}=e.useContext(Se),i=function(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}(o,(e=>e.element===t.element)),c=function(t){const r=e.useRef(null);return e.useEffect((()=>{r.current=t}),[t]),r.current}(o),s=o.some(((e,t)=>c&&c[t]&&c[t].element!==e.element));return F((()=>{if(t.element)return n(le({},t,{index:i})),()=>{a(t.element)};r({})}),[n,a,i,s,t]),{parentId:l,index:i}}function Te(t){const{children:r,id:n}=t,[a,o]=e.useState([]),l=e.useCallback((e=>{let{element:t}=e,r=ie(e,Ee);o((e=>{let n;if(0===e.length)return[le({},r,{element:t,index:0})];const a=function(e,t){let r=0,n=e.length-1;for(;r<=n;){const a=Math.floor((r+n)/2);if(e[a].element===t)return a;e[a].element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING?n=a-1:r=a+1}return r}(e,t);if(e[a]&&e[a].element===t)n=e;else{const o=le({},r,{element:t,index:a});n=e.slice(),n.splice(a,0,o)}return n.forEach(((e,t)=>{e.index=t})),n}))}),[]),i=e.useCallback((e=>{o((t=>t.filter((t=>e!==t.element))))}),[]),c=e.useMemo((()=>({descendants:a,registerDescendant:l,unregisterDescendant:i,parentId:n})),[a,l,i,n]);return ye.exports.jsx(Se.Provider,{value:c,children:r})}function je(e){return X("MuiTreeView",e)}H("MuiTreeView",["root"]);const Ue=["children","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disabledItemsFocusable","disableSelection","expanded","id","multiSelect","onBlur","onFocus","onKeyDown","onNodeFocus","onNodeSelect","onNodeToggle","selected"],ke=M("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0});function Ne(e,t,r){for(let n=t;n<e.length;n+=1)if(r===e[n])return n;return-1}function _e(){return!1}const Re=[],Ae=[];var Fe=e.forwardRef((function(t,r){const n=E({props:t,name:"MuiTreeView"}),{children:a,className:o,defaultCollapseIcon:l,defaultEndIcon:i,defaultExpanded:c=Re,defaultExpandIcon:s,defaultParentIcon:u,defaultSelected:f=Ae,disabledItemsFocusable:d=!1,disableSelection:p=!1,expanded:m,id:b,multiSelect:y=!1,onBlur:g,onFocus:h,onKeyDown:v,onNodeFocus:O,onNodeSelect:I,onNodeToggle:w,selected:x}=n,C=ie(n,Ue),M="rtl"===S().direction,D=le({},n,{defaultExpanded:c,defaultSelected:f,disabledItemsFocusable:d,disableSelection:p,multiSelect:y}),P=(e=>{const{classes:t}=e;return be({root:["root"]},je,t)})(D),T=B(b),j=e.useRef(null),U=L(j,r),[k,N]=e.useState(null),_=e.useRef({}),R=e.useRef({}),[A,F]=W({controlled:m,default:c,name:"TreeView",state:"expanded"}),[X,H]=W({controlled:x,default:f,name:"TreeView",state:"selected"}),G=e.useCallback((e=>!!Array.isArray(A)&&-1!==A.indexOf(e)),[A]),K=e.useCallback((e=>_.current[e]&&_.current[e].expandable),[]),$=e.useCallback((e=>Array.isArray(X)?-1!==X.indexOf(e):X===e),[X]),V=e.useCallback((e=>{let t=_.current[e];if(!t)return!1;if(t.disabled)return!0;for(;null!=t.parentId;)if(t=_.current[t.parentId],t.disabled)return!0;return!1}),[]),z=e=>Object.keys(_.current).map((e=>_.current[e])).filter((t=>t.parentId===e)).sort(((e,t)=>e.index-t.index)).map((e=>e.id)),q=e=>{let t=z(e);return d||(t=t.filter((e=>!V(e)))),t},J=e=>{if(G(e)&&q(e).length>0)return q(e)[0];let t=_.current[e];for(;null!=t;){const e=q(t.parentId),r=e[e.indexOf(t.id)+1];if(r)return r;t=_.current[t.parentId]}return null},Q=e=>{const t=_.current[e],r=q(t.parentId),n=r.indexOf(e);if(0===n)return t.parentId;let a=r[n-1];for(;G(a)&&q(a).length>0;)a=q(a).pop();return a},Z=()=>{let e=q(null).pop();for(;G(e);)e=q(e).pop();return e},ee=()=>q(null)[0],te=(e,t)=>{const[r,n]=((e,t)=>{if(e===t)return[e,t];const r=_.current[e],n=_.current[t];if(r.parentId===n.id||n.parentId===r.id)return n.parentId===r.id?[r.id,n.id]:[n.id,r.id];const a=[r.id],o=[n.id];let l=r.parentId,i=n.parentId,c=-1!==o.indexOf(l),s=-1!==a.indexOf(i),u=!0,f=!0;for(;!s&&!c;)u&&(a.push(l),c=-1!==o.indexOf(l),u=null!==l,!c&&u&&(l=_.current[l].parentId)),f&&!c&&(o.push(i),s=-1!==a.indexOf(i),f=null!==i,!s&&f&&(i=_.current[i].parentId));const d=c?l:i,p=z(d),m=a[a.indexOf(d)-1],b=o[o.indexOf(d)-1];return p.indexOf(m)<p.indexOf(b)?[e,t]:[t,e]})(e,t),a=[r];let o=r;for(;o!==n;)o=J(o),a.push(o);return a},re=(e,t)=>{t&&(N(t),O&&O(e,t))},ne=(e,t)=>re(e,J(t)),ae=(e,t=k)=>{let r;r=-1!==A.indexOf(t)?A.filter((e=>e!==t)):[t].concat(A),w&&w(e,r),F(r)},oe=e.useRef(null),ce=e.useRef(!1),ue=e.useRef([]),fe=(e,t,r=!1)=>!!t&&(r?((e,t)=>{let r;r=-1!==X.indexOf(t)?X.filter((e=>e!==t)):[t].concat(X),I&&I(e,r),H(r)})(e,t):((e,t)=>{const r=y?[t]:t;I&&I(e,r),H(r)})(e,t),oe.current=t,ce.current=!1,ue.current=[],!0),de=(e,t,r=!1)=>{const{start:n=oe.current,end:a,current:o}=t;r?((e,t)=>{let r=X.slice();const{start:n,next:a,current:o}=t;a&&o&&(-1===ue.current.indexOf(o)&&(ue.current=[]),ce.current?-1!==ue.current.indexOf(a)?(r=r.filter((e=>e===n||e!==o)),ue.current=ue.current.filter((e=>e===n||e!==o))):(r.push(a),ue.current.push(a)):(r.push(a),ue.current.push(o,a)),I&&I(e,r),H(r))})(e,{start:n,next:a,current:o}):null!=n&&null!=a&&((e,t)=>{let r=X.slice();const{start:n,end:a}=t;ce.current&&(r=r.filter((e=>-1===ue.current.indexOf(e))));let o=te(n,a);o=o.filter((e=>!V(e))),ue.current=o;let l=r.concat(o);l=l.filter(((e,t)=>l.indexOf(e)===t)),I&&I(e,l),H(l)})(e,{start:n,end:a}),ce.current=!0},pe=e.useCallback((e=>{const{id:t,index:r,parentId:n,expandable:a,idAttribute:o,disabled:l}=e;_.current[t]={id:t,index:r,parentId:n,expandable:a,idAttribute:o,disabled:l}}),[]),me=e.useCallback((e=>{const t=le({},_.current);delete t[e],_.current=t,N((t=>t===e&&j.current===Y(j.current).activeElement?z(null)[0]:t))}),[]),ge=e.useCallback(((e,t)=>{R.current[e]=t}),[]),he=e.useCallback((e=>{const t=le({},R.current);delete t[e],R.current=t}),[]),ve=e=>(K(k)&&(G(k)?ne(e,k):V(k)||ae(e)),!0),Oe=e=>{if(G(k)&&!V(k))return ae(e,k),!0;const t=(r=k,_.current[r].parentId);var r;return!!t&&(re(e,t),!0)},Ie=_.current[k]?_.current[k].idAttribute:null;return ye.exports.jsx(Me.Provider,{value:{icons:{defaultCollapseIcon:l,defaultExpandIcon:s,defaultParentIcon:u,defaultEndIcon:i},focus:re,toggleExpansion:ae,isExpanded:G,isExpandable:K,isFocused:e=>k===e,isSelected:$,isDisabled:V,selectNode:p?_e:fe,selectRange:p?_e:de,multiSelect:y,disabledItemsFocusable:d,mapFirstChar:ge,unMapFirstChar:he,registerNode:pe,unregisterNode:me,treeId:T},children:ye.exports.jsx(Te,{children:ye.exports.jsx(ke,le({role:"tree",id:T,"aria-activedescendant":Ie,"aria-multiselectable":y,className:se(P.root,o),ref:U,tabIndex:0,onKeyDown:e=>{let t=!1;const r=e.key;if(e.altKey||e.currentTarget!==e.target||!k)return;const n=e.ctrlKey||e.metaKey;switch(r){case" ":p||V(k)||(y&&e.shiftKey?(de(e,{end:k}),t=!0):t=y?fe(e,k,!0):fe(e,k)),e.stopPropagation();break;case"Enter":V(k)||(K(k)?(ae(e),t=!0):t=y?fe(e,k,!0):fe(e,k)),e.stopPropagation();break;case"ArrowDown":y&&e.shiftKey&&!p&&((e,t)=>{V(J(t))||de(e,{end:J(t),current:t},!0)})(e,k),ne(e,k),t=!0;break;case"ArrowUp":y&&e.shiftKey&&!p&&((e,t)=>{V(Q(t))||de(e,{end:Q(t),current:t},!0)})(e,k),((e,t)=>{re(e,Q(t))})(e,k),t=!0;break;case"ArrowRight":t=M?Oe(e):ve(e);break;case"ArrowLeft":t=M?ve(e):Oe(e);break;case"Home":y&&n&&e.shiftKey&&!p&&!V(k)&&((e,t)=>{oe.current||(oe.current=t);const r=ce.current?oe.current:t;de(e,{start:r,end:ee()})})(e,k),(e=>{re(e,ee())})(e),t=!0;break;case"End":y&&n&&e.shiftKey&&!p&&!V(k)&&((e,t)=>{oe.current||(oe.current=t);const r=ce.current?oe.current:t;de(e,{start:r,end:Z()})})(e,k),(e=>{re(e,Z())})(e),t=!0;break;default:"*"===r?(((e,t)=>{const r=_.current[t],n=z(r.parentId).filter((e=>K(e)&&!G(e))),a=A.concat(n);n.length>0&&(F(a),w&&w(e,a))})(e,k),t=!0):y&&n&&"a"===r.toLowerCase()&&!p?((e=>{de(e,{start:ee(),end:Z()})})(e),t=!0):!n&&!e.shiftKey&&((a=r)&&1===a.length&&a.match(/\S/))&&(((e,t,r)=>{let n,a;const o=r.toLowerCase(),l=[],i=[];Object.keys(R.current).forEach((e=>{const t=R.current[e],r=_.current[e],n=!r.parentId||G(r.parentId),a=!d&&V(e);n&&!a&&(l.push(e),i.push(t))})),n=l.indexOf(t)+1,n>=l.length&&(n=0),a=Ne(i,n,o),-1===a&&(a=Ne(i,0,o)),a>-1&&re(e,l[a])})(e,k,r),t=!0)}var a;t&&(e.preventDefault(),e.stopPropagation()),v&&v(e)},onFocus:e=>{if(e.target===e.currentTarget){const t=Array.isArray(X)?X[0]:X;re(e,t||q(null)[0])}h&&h(e)},onBlur:e=>{N(null),g&&g(e)},ownerState:D},C,{children:a}))})})}));const Be=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"];var Le=e.forwardRef((function(t,r){const{classes:n,className:a,displayIcon:o,expansionIcon:l,icon:i,label:c,nodeId:s,onClick:u,onMouseDown:f}=t,d=ie(t,Be),{disabled:p,expanded:m,selected:b,focused:y,handleExpansion:g,handleSelection:h,preventSelection:v}=function(t){const{focus:r,isExpanded:n,isExpandable:a,isFocused:o,isDisabled:l,isSelected:i,multiSelect:c,selectNode:s,selectRange:u,toggleExpansion:f}=e.useContext(Me),d=!!a&&a(t),p=!!n&&n(t),m=!!o&&o(t),b=!!l&&l(t),y=!!i&&i(t);return{disabled:b,expanded:p,selected:y,focused:m,handleExpansion:e=>{if(!b){m||r(e,t);const a=c&&(e.shiftKey||e.ctrlKey||e.metaKey);!d||a&&n(t)||f(e,t)}},handleSelection:e=>{b||(m||r(e,t),c&&(e.shiftKey||e.ctrlKey||e.metaKey)?e.shiftKey?u(e,{end:t}):s(e,t,!0):s(e,t))},preventSelection:e=>{(e.shiftKey||e.ctrlKey||e.metaKey||b)&&e.preventDefault()}}}(s),O=i||l||o;return ye.exports.jsxs("div",le({className:se(a,n.root,m&&n.expanded,b&&n.selected,y&&n.focused,p&&n.disabled),onClick:e=>{g(e),h(e),u&&u(e)},onMouseDown:e=>{v(e),f&&f(e)},ref:r},d,{children:[ye.exports.jsx("div",{className:n.iconContainer,children:O}),ye.exports.jsx("div",{className:n.label,children:c})]}))}));function We(e){return X("MuiTreeItem",e)}var Ye=H("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]);const Xe=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],He=M("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Ge=M(Le,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${Ye.iconContainer}`]:t.iconContainer},t.label&&{[`& .${Ye.label}`]:t.label}]})((({theme:e})=>({padding:"0 8px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ye.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${Ye.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ye.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:D(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:D(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:D(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Ye.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:D(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${Ye.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${Ye.label}`]:le({width:"100%",minWidth:0,paddingLeft:4,position:"relative"},e.typography.body1)}))),Ke=M(G,{name:"MuiTreeItem",slot:"Group",overridesResolver:(e,t)=>t.group})({margin:0,padding:0,marginLeft:17});var $e=e.forwardRef((function(t,r){const n=E({props:t,name:"MuiTreeItem"}),{children:a,className:o,collapseIcon:l,ContentComponent:i=Le,ContentProps:c,endIcon:s,expandIcon:u,disabled:f,icon:d,id:p,label:m,nodeId:b,onClick:y,onMouseDown:g,TransitionComponent:h=G,TransitionProps:v}=n,O=ie(n,Xe),{icons:I={},focus:w,isExpanded:x,isFocused:C,isSelected:M,isDisabled:S,multiSelect:D,disabledItemsFocusable:P,mapFirstChar:T,unMapFirstChar:j,registerNode:U,unregisterNode:k,treeId:N}=e.useContext(Me);let _=null;null!=p?_=p:N&&b&&(_=`${N}-${b}`);const[R,A]=e.useState(null),F=e.useRef(null),B=L(A,r),W=e.useMemo((()=>({element:R,id:b})),[b,R]),{index:X,parentId:H}=Pe(W),K=Boolean(Array.isArray(a)?a.length:a),$=!!x&&x(b),V=!!C&&C(b),z=!!M&&M(b),q=!!S&&S(b),J=le({},n,{expanded:$,focused:V,selected:z,disabled:q}),Q=(e=>{const{classes:t}=e;return be({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},We,t)})(J);let Z,ee,te;return K&&(ee=$?l||I.defaultCollapseIcon:u||I.defaultExpandIcon),Z=K?I.defaultParentIcon:s||I.defaultEndIcon,e.useEffect((()=>{if(U&&k&&-1!==X)return U({id:b,idAttribute:_,index:X,parentId:H,expandable:K,disabled:f}),()=>{k(b)}}),[U,k,H,X,b,K,f,_]),e.useEffect((()=>{if(T&&j&&m)return T(b,F.current.textContent.substring(0,1).toLowerCase()),()=>{j(b)}}),[T,j,b,m]),D?te=z:z&&(te=!0),ye.exports.jsxs(He,le({className:se(Q.root,o),role:"treeitem","aria-expanded":K?$:null,"aria-selected":te,"aria-disabled":q||null,ref:B,id:_,tabIndex:-1},O,{ownerState:J,onFocus:function(e){e.target===e.currentTarget&&Y(e.target).getElementById(N).focus({preventScroll:!0});const t=!P&&q;V||e.currentTarget!==e.target||t||w(e,b)},children:[ye.exports.jsx(Ge,le({as:i,ref:F,classes:{root:Q.content,expanded:Q.expanded,selected:Q.selected,focused:Q.focused,disabled:Q.disabled,iconContainer:Q.iconContainer,label:Q.label},label:m,nodeId:b,onClick:y,onMouseDown:g,icon:d,expansionIcon:ee,displayIcon:Z,ownerState:J},c)),a&&ye.exports.jsx(Te,{id:b,children:ye.exports.jsx(Ke,le({as:h,unmountOnExit:!0,className:Q.group,in:$,component:"ul",role:"group"},v,{children:a}))})]}))})),Ve=M((function(e){return a.createElement(v,ne({},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:D(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function ze(e){var t=e.anchorEl,r=e.position,n=e.onMenuClose,o=e.onCreateFolder,l=e.onRenameFolder,i=e.onContextMenu,c=Boolean(t),s=r.pageX,u=r.pageY;function f(e){"Tab"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n())}var d=function(e){t.current&&t.current.contains(e.target)||n()};return a.createElement("div",null,a.createElement(Ve,{anchorEl:{getBoundingClientRect:function(){return{x:s,y:u,width:0,height:0,top:u,right:s,bottom:u,left:s}}},open:c,onClose:n,onContextMenu:function(e){return i(e)},role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,r=e.placement;return a.createElement(I,ne({},t,{style:{transformOrigin:"bottom-start"===r?"left top":"left bottom"}}),a.createElement(m,null,a.createElement(w,{onClickAway:d},a.createElement(O,{autoFocusItem:c,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:f},a.createElement(h,{onClick:o,disableRipple:!0},a.createElement(x,null),"Create new folder"),a.createElement(h,{onClick:l,disableRipple:!0},a.createElement(C,null),"Rename")))))})))}var qe=M(N)((function(e){return e.theme,{textTransform:"none",minWidth:"120px"}})),Je=M(qe)((function(e){return e.theme,{}})),Qe=M(qe)((function(e){return e.theme,{}})),Ze={exports:{}},et={},tt=fe(ue),rt={},nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},nt.findInArray=function(e,t){for(var r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},nt.int=function(e){return parseInt(e,10)},nt.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},nt.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var at={};Object.defineProperty(at,"__esModule",{value:!0}),at.browserPrefixToKey=it,at.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},at.default=void 0,at.getPrefix=lt;var ot=["Moz","Webkit","O","ms"];function lt(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var n=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!n)return"";if(r in n)return"";for(var a=0;a<ot.length;a++)if(it(r,ot[a])in n)return ot[a];return""}function it(e,t){return t?"".concat(t).concat(function(e){for(var t="",r=!0,n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}var ct=lt();function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}at.default=ct,Object.defineProperty(rt,"__esModule",{value:!0}),rt.addClassName=vt,rt.addEvent=function(e,t,r,n){if(!e)return;var a=mt({capture:!0},n);e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},rt.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&vt(e.body,"react-draggable-transparent-selection")},rt.createCSSTransform=function(e,t){var r=ht(e,t,"px");return bt({},(0,ft.browserPrefixToKey)("transform",ft.default),r)},rt.createSVGTransform=function(e,t){return ht(e,t,"")},rt.getTouch=function(e,t){return e.targetTouches&&(0,ut.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,ut.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},rt.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},rt.getTranslation=ht,rt.innerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ut.int)(r.paddingTop),t-=(0,ut.int)(r.paddingBottom)},rt.innerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ut.int)(r.paddingLeft),t-=(0,ut.int)(r.paddingRight)},rt.matchesSelector=gt,rt.matchesSelectorAndParentsTo=function(e,t,r){var n=e;do{if(gt(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},rt.offsetXYFromParent=function(e,t,r){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-n.left)/r,o=(e.clientY+t.scrollTop-n.top)/r;return{x:a,y:o}},rt.outerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ut.int)(r.borderTopWidth),t+=(0,ut.int)(r.borderBottomWidth)},rt.outerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ut.int)(r.borderLeftWidth),t+=(0,ut.int)(r.borderRightWidth)},rt.removeClassName=Ot,rt.removeEvent=function(e,t,r,n){if(!e)return;var a=mt({capture:!0},n);e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},rt.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&Ot(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var ut=nt,ft=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==st(e)&&"function"!=typeof e)return{default:e};var r=dt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(at);function dt(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(dt=function(e){return e?r:t})(e)}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt="";function gt(e,t){return yt||(yt=(0,ut.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,ut.isFunction)(e[t])}))),!!(0,ut.isFunction)(e[yt])&&e[yt](t)}function ht(e,t,r){var n=e.x,a=e.y,o="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){var l="".concat("string"==typeof t.x?t.x:t.x+r),i="".concat("string"==typeof t.y?t.y:t.y+r);o="translate(".concat(l,", ").concat(i,")")+o}return o}function vt(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Ot(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var It={};Object.defineProperty(It,"__esModule",{value:!0}),It.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},It.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},It.createCoreData=function(e,t,r){var n=e.state,a=!(0,wt.isNum)(n.lastX),o=Ct(e);return a?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:t,y:r}},It.createDraggableData=function(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},It.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];var n=e.props.bounds;n="string"==typeof n?n:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(n);var a=Ct(e);if("string"==typeof n){var o,l=a.ownerDocument,i=l.defaultView;if(!((o="parent"===n?a.parentNode:l.querySelector(n))instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');var c=o,s=i.getComputedStyle(a),u=i.getComputedStyle(c);n={left:-a.offsetLeft+(0,wt.int)(u.paddingLeft)+(0,wt.int)(s.marginLeft),top:-a.offsetTop+(0,wt.int)(u.paddingTop)+(0,wt.int)(s.marginTop),right:(0,xt.innerWidth)(c)-(0,xt.outerWidth)(a)-a.offsetLeft+(0,wt.int)(u.paddingRight)-(0,wt.int)(s.marginRight),bottom:(0,xt.innerHeight)(c)-(0,xt.outerHeight)(a)-a.offsetTop+(0,wt.int)(u.paddingBottom)-(0,wt.int)(s.marginBottom)}}(0,wt.isNum)(n.right)&&(t=Math.min(t,n.right));(0,wt.isNum)(n.bottom)&&(r=Math.min(r,n.bottom));(0,wt.isNum)(n.left)&&(t=Math.max(t,n.left));(0,wt.isNum)(n.top)&&(r=Math.max(r,n.top));return[t,r]},It.getControlPosition=function(e,t,r){var n="number"==typeof t?(0,xt.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;var a=Ct(r),o=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,xt.offsetXYFromParent)(n||e,o,r.props.scale)},It.snapToGrid=function(e,t,r){var n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]};var wt=nt,xt=rt;function Ct(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Mt={},Et={};function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}Object.defineProperty(Et,"__esModule",{value:!0}),Et.default=function(){},Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.default=void 0;var Dt=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==St(e)&&"function"!=typeof e)return{default:e};var r=Rt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(a),Pt=_t(de.exports),Tt=_t(_),jt=rt,Ut=It,kt=nt,Nt=_t(Et);function _t(e){return e&&e.__esModule?e:{default:e}}function Rt(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Rt=function(e){return e?r:t})(e)}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t){return Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wt(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gt(e);if(t){var a=Gt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Xt(this,r)}}function Xt(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ht(e)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $t={start:"touchstart",move:"touchmove",stop:"touchend"},Vt={start:"mousedown",move:"mousemove",stop:"mouseup"},zt=Vt,qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wt(e,t)}(o,Dt.Component);var t,r,n,a=Yt(o);function o(){var e;Bt(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Kt(Ht(e=a.call.apply(a,[this].concat(r))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Kt(Ht(e),"mounted",!1),Kt(Ht(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var r=e.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=r.ownerDocument;if(!(e.props.disabled||!(t.target instanceof n.defaultView.Node)||e.props.handle&&!(0,jt.matchesSelectorAndParentsTo)(t.target,e.props.handle,r)||e.props.cancel&&(0,jt.matchesSelectorAndParentsTo)(t.target,e.props.cancel,r))){"touchstart"===t.type&&t.preventDefault();var a=(0,jt.getTouchIdentifier)(t);e.setState({touchIdentifier:a});var o=(0,Ut.getControlPosition)(t,a,Ht(e));if(null!=o){var l=o.x,i=o.y,c=(0,Ut.createCoreData)(Ht(e),l,i);(0,Nt.default)("DraggableCore: handleDragStart: %j",c),(0,Nt.default)("calling",e.props.onStart),!1!==e.props.onStart(t,c)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,jt.addUserSelectStyles)(n),e.setState({dragging:!0,lastX:l,lastY:i}),(0,jt.addEvent)(n,zt.move,e.handleDrag),(0,jt.addEvent)(n,zt.stop,e.handleDragStop))}}})),Kt(Ht(e),"handleDrag",(function(t){var r=(0,Ut.getControlPosition)(t,e.state.touchIdentifier,Ht(e));if(null!=r){var n=r.x,a=r.y;if(Array.isArray(e.props.grid)){var o=n-e.state.lastX,l=a-e.state.lastY,i=At((0,Ut.snapToGrid)(e.props.grid,o,l),2);if(o=i[0],l=i[1],!o&&!l)return;n=e.state.lastX+o,a=e.state.lastY+l}var c=(0,Ut.createCoreData)(Ht(e),n,a);if((0,Nt.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:n,lastY:a});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var s=document.createEvent("MouseEvents");s.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(s)}}})),Kt(Ht(e),"handleDragStop",(function(t){if(e.state.dragging){var r=(0,Ut.getControlPosition)(t,e.state.touchIdentifier,Ht(e));if(null!=r){var n=r.x,a=r.y;if(Array.isArray(e.props.grid)){var o=n-e.state.lastX||0,l=a-e.state.lastY||0,i=At((0,Ut.snapToGrid)(e.props.grid,o,l),2);o=i[0],l=i[1],n=e.state.lastX+o,a=e.state.lastY+l}var c=(0,Ut.createCoreData)(Ht(e),n,a);if(!1===e.props.onStop(t,c)||!1===e.mounted)return!1;var s=e.findDOMNode();s&&e.props.enableUserSelectHack&&(0,jt.removeUserSelectStyles)(s.ownerDocument),(0,Nt.default)("DraggableCore: handleDragStop: %j",c),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),s&&((0,Nt.default)("DraggableCore: Removing handlers"),(0,jt.removeEvent)(s.ownerDocument,zt.move,e.handleDrag),(0,jt.removeEvent)(s.ownerDocument,zt.stop,e.handleDragStop))}}})),Kt(Ht(e),"onMouseDown",(function(t){return zt=Vt,e.handleDragStart(t)})),Kt(Ht(e),"onMouseUp",(function(t){return zt=Vt,e.handleDragStop(t)})),Kt(Ht(e),"onTouchStart",(function(t){return zt=$t,e.handleDragStart(t)})),Kt(Ht(e),"onTouchEnd",(function(t){return zt=$t,e.handleDragStop(t)})),e}return t=o,r=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,jt.addEvent)(e,$t.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,jt.removeEvent)(t,Vt.move,this.handleDrag),(0,jt.removeEvent)(t,$t.move,this.handleDrag),(0,jt.removeEvent)(t,Vt.stop,this.handleDragStop),(0,jt.removeEvent)(t,$t.stop,this.handleDragStop),(0,jt.removeEvent)(e,$t.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,jt.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current:Tt.default.findDOMNode(this)}},{key:"render",value:function(){return Dt.cloneElement(Dt.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}],r&&Lt(t.prototype,r),n&&Lt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();Mt.default=qt,Kt(qt,"displayName","DraggableCore"),Kt(qt,"propTypes",{allowAnyClick:Pt.default.bool,disabled:Pt.default.bool,enableUserSelectHack:Pt.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Pt.default.arrayOf(Pt.default.number),handle:Pt.default.string,cancel:Pt.default.string,nodeRef:Pt.default.object,onStart:Pt.default.func,onDrag:Pt.default.func,onStop:Pt.default.func,onMouseDown:Pt.default.func,scale:Pt.default.number,className:kt.dontSetMe,style:kt.dontSetMe,transform:kt.dontSetMe}),Kt(qt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=m(r);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(a),n=p(de.exports),o=p(_),l=p(tt),i=rt,c=It,s=nt,u=p(Mt),f=p(Et),d=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var a=E(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(p,e);var t,n,a,s=x(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),S(M(t=s.call(this,e)),"onDragStart",(function(e,r){if((0,f.default)("Draggable: onDragStart: %j",r),!1===t.props.onStart(e,(0,c.createDraggableData)(M(t),r)))return!1;t.setState({dragging:!0,dragged:!0})})),S(M(t),"onDrag",(function(e,r){if(!t.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",r);var n=(0,c.createDraggableData)(M(t),r),a={x:n.x,y:n.y};if(t.props.bounds){var o=a.x,l=a.y;a.x+=t.state.slackX,a.y+=t.state.slackY;var i=v((0,c.getBoundPosition)(M(t),a.x,a.y),2),s=i[0],u=i[1];a.x=s,a.y=u,a.slackX=t.state.slackX+(o-a.x),a.slackY=t.state.slackY+(l-a.y),n.x=a.x,n.y=a.y,n.deltaX=a.x-t.state.x,n.deltaY=a.y-t.state.y}if(!1===t.props.onDrag(e,n))return!1;t.setState(a)})),S(M(t),"onDragStop",(function(e,r){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(M(t),r)))return!1;(0,f.default)("Draggable: onDragStop: %j",r);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var a=t.props.position,o=a.x,l=a.y;n.x=o,n.y=l}t.setState(n)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:h({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=p,a=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.position,n=t.prevPropsPosition;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:h({},r)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var n=t.children,a=t.defaultPosition,o=t.defaultClassName,s=t.defaultClassNameDragging,f=t.defaultClassNameDragged,p=t.position,m=t.positionOffset;t.scale;var g=y(t,d),v={},O=null,I=!Boolean(p)||this.state.dragging,w=p||a,x={x:(0,c.canDragX)(this)&&I?this.state.x:w.x,y:(0,c.canDragY)(this)&&I?this.state.y:w.y};this.state.isElementSVG?O=(0,i.createSVGTransform)(x,m):v=(0,i.createCSSTransform)(x,m);var C=(0,l.default)(n.props.className||"",o,(S(e={},s,this.state.dragging),S(e,f,this.state.dragged),e));return r.createElement(u.default,b({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:C,style:h(h({},n.props.style),v),transform:O}))}}])&&I(t.prototype,n),a&&I(t,a),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component);e.default=D,S(D,"displayName","Draggable"),S(D,"propTypes",h(h({},u.default.propTypes),{},{axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),S(D,"defaultProps",h(h({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(et);var Jt=et.default,Qt=et.DraggableCore;Ze.exports=Jt,Ze.exports.default=Jt,Ze.exports.DraggableCore=Qt;var Zt=M(R)((function(e){var t=e.theme;return{"& .MuiPaper-root":{width:"45%"},"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function er(e){return a.createElement(Ze.exports,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},a.createElement(m,ne({},e)))}function tr(e){return a.createElement(Zt,ne({maxWidth:"md",PaperComponent:er},e))}var rr=function(e){return new Promise((function(t,r){craftercms.utils.ajax.get(e).subscribe((function(e){t(e)}))}))},nr=function(e,t,r){return new Promise((function(n,a){craftercms.utils.ajax.post(e,t,r).subscribe((function(e){n(e)}))}))},ar={origin:function(){return window.location.origin},siteId:function(){return craftercms.getStore().getState().sites.active},getPreviewItem:function(e){return{name:e.label,path:e.path,contentType:e.contentTypeId}},openEditForm:function(e,t){var r=ar.siteId(),n=craftercms.getStore().getState().env.authoringBase;return craftercms.getStore().dispatch({type:"SHOW_EDIT_DIALOG",payload:{site:r,path:t,type:"form",authoringBase:n,isHidden:!1,onSaveSuccess:{type:"BATCH_ACTIONS",payload:[{type:"DISPATCH_DOM_EVENT",payload:{id:"editDialogSuccess"}},{type:"SHOW_EDIT_ITEM_SUCCESS_NOTIFICATION"},{type:"CLOSE_EDIT_DIALOG"}]},onCancel:{type:"BATCH_ACTIONS",payload:[{type:"CLOSE_EDIT_DIALOG"},{type:"DISPATCH_DOM_EVENT",payload:{id:"editDialogDismissed"}}]}}})},getChildrenPaths:function(e){return ae(this,void 0,void 0,(function(){var t,r;return oe(this,(function(n){switch(n.label){case 0:return t="".concat(ar.origin()).concat("/studio/api/1/services/api/1/content/get-items-tree.json","?site=").concat(ar.siteId(),"&path=").concat(e,"&depth=1"),[4,rr(t)];case 1:return 200===(r=n.sent()).status?[2,r.response.item.children.filter((function(t){return t.path!==e})).map((function(e){return e.path}))]:[2,[]]}}))}))},getItem:function(e){return ae(this,void 0,void 0,(function(){var t,r;return oe(this,(function(n){switch(n.label){case 0:return t="".concat(ar.origin()).concat("/studio/api/1/services/api/1/content/get-item.json","?site=").concat(ar.siteId(),"&path=").concat(e,"&populateDependencies=false"),[4,rr(t)];case 1:return 200===(r=n.sent()).status?[2,r.response]:[2,null]}}))}))},copyItem:function(e,t){return ae(this,void 0,void 0,(function(){var r,n,a,o;return oe(this,(function(l){switch(l.label){case 0:return r="".concat(ar.origin()).concat("/studio/api/2/content/paste"),n={},a={siteId:ar.siteId(),operation:"COPY",targetPath:t,item:{path:e}},[4,nr(r,a,n)];case 1:return 200===(o=l.sent()).status?[2,o.response]:[2,null]}}))}))},createFolder:function(e,t){return ae(this,void 0,void 0,(function(){var r,n;return oe(this,(function(a){switch(a.label){case 0:return r="".concat(ar.origin()).concat("/studio/api/1/services/api/1/content/create-folder.json","?site=").concat(ar.siteId(),"&path=").concat(e,"&name=").concat(t),"",[4,nr(r,"",{})];case 1:return 200===(n=a.sent()).status?[2,n.response]:[2,!1]}}))}))},renameFolder:function(e,t){return ae(this,void 0,void 0,(function(){var r,n;return oe(this,(function(a){switch(a.label){case 0:return r="".concat(ar.origin()).concat("/studio/api/1/services/api/1/content/rename-folder.json","?site=").concat(ar.siteId(),"&path=").concat(e,"&name=").concat(t),"",[4,nr(r,"",{})];case 1:return 200===(n=a.sent()).status?[2,n.response]:[2,!1]}}))}))}};function or(e){var r=this,n=e.open,o=e.onClose,l=e.path,i=t(""),c=i[0],s=i[1],u=t(!1),f=u[0],d=u[1],p=function(){s(""),o()};return a.createElement("div",null,a.createElement(tr,{open:n,onClose:p,"aria-labelledby":"draggable-dialog-title"},a.createElement(U,{style:{cursor:"move"},id:"draggable-dialog-title"},"Create a New Folder"),a.createElement(j,null,a.createElement(k,null,"Parent path: ",l,a.createElement("br",null),"Please enter a folder name."),a.createElement(P,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",type:"text",fullWidth:!0,variant:"standard",value:c,onChange:function(e){return s(e.target.value.trim())}})),a.createElement(T,null,a.createElement(Qe,{variant:"outlined",color:"primary",onClick:p},"Cancel"),a.createElement(Je,{variant:"contained",color:"primary",onClick:function(){return ae(r,void 0,void 0,(function(){var e;return oe(this,(function(t){switch(t.label){case 0:return c&&l?(d(!0),[4,ar.createFolder(l,c)]):[3,2];case 1:e=t.sent(),s(""),o(e),d(!1),t.label=2;case 2:return[2]}}))}))},disabled:!c||f},"Create"))))}function lr(e){var n=this,o=e.open,l=e.onClose,i=e.path,c=t(""),s=c[0],u=c[1],f=t(!1),d=f[0],p=f[1];r((function(){i&&u(i.split("/").pop())}),[i]);var m=function(){l()};return a.createElement("div",null,a.createElement(tr,{open:o,onClose:m,"aria-labelledby":"draggable-dialog-title"},a.createElement(U,{style:{cursor:"move"},id:"draggable-dialog-title"},"Rename Folder"),a.createElement(j,null,a.createElement(k,null,"Current path: ",i,a.createElement("br",null),"Please provide a new folder name."),a.createElement(P,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",type:"text",fullWidth:!0,variant:"standard",value:s,onChange:function(e){return u(e.target.value.trim())}})),a.createElement(T,null,a.createElement(Qe,{variant:"outlined",color:"primary",onClick:m},"Cancel"),a.createElement(Je,{variant:"contained",color:"primary",onClick:function(){return ae(n,void 0,void 0,(function(){var e;return oe(this,(function(t){switch(t.label){case 0:return s&&i?(p(!0),[4,ar.renameFolder(i,s)]):[3,2];case 1:e=t.sent(),l(e),p(!1),t.label=2;case 2:return[2]}}))}))},disabled:!s||d},"Rename"))))}var ir=new A;function cr(e){var n=this,o=e.rootDir,l=t({}),i=l[0],h=l[1],v=t([]),O=v[0],I=v[1],w=t(""),x=w[0],C=w[1],M=t(null),E=M[0],S=M[1],D=t({}),P=D[0],T=D[1],j=t(!1),U=j[0],k=j[1],N=t(!1),_=N[0],R=N[1],A=function(e,t){return ae(n,void 0,void 0,(function(){var r,n,a;return oe(this,(function(l){switch(l.label){case 0:return e?(r=function(e,t){for(var r=e.split("/").filter((function(e){return!!e})),n=[],a="",l=o,i=0;i<r.length;i+=1)(a=0===i?"/".concat(r[i]):"".concat(a,"/").concat(r[i])).indexOf(l)>=0&&n.push(a);for(var c={},s=function(){var e=n.shift();if(t.id===e)return c=t,"continue";c=c.children.find((function(t){return t.id===e}))};n.length>0;)s();return c}(e,i),!t&&r.children.length>0?[2]:[4,ar.getChildrenPaths(e)]):[2];case 1:return n=l.sent(),a=n.map((function(e){return{id:e,name:e.split("/").pop(),children:[]}})),r.children=a,h(Object.assign({},i)),[2]}}))}))};r((function(){!function(){ae(this,void 0,void 0,(function(){var e,t;return oe(this,(function(r){switch(r.label){case 0:return[4,ar.getChildrenPaths(o)];case 1:return e=r.sent(),t=e.map((function(e){return{id:e,name:e.split("/").pop(),children:[]}})),h({id:o,name:o.split("/").pop(),children:t}),[2]}}))}))}()}),[]);var F=function(e){return e.id?a.createElement($e,{key:e.id,nodeId:e.id,label:e.name,onContextMenu:function(t){return B(t,e.id)}},Array.isArray(e.children)&&e.children.length>0?e.children.map((function(e){return F(e)})):a.createElement($e,{nodeId:"empty-tree"})):a.createElement($e,{nodeId:"empty-tree"})},B=function(e,t){e.stopPropagation(),e.preventDefault(),C(t),S(e.currentTarget),T({pageX:e.pageX,pageY:e.pageY,path:t})};return a.createElement(a.Fragment,null,a.createElement(b,{container:!0,sx:{padding:"15px"}},a.createElement(u,{component:m,sx:{marginBottom:"15px"}},a.createElement(c,{sx:{minWidth:650},"aria-label":"destination path table"},a.createElement(f,null,a.createElement(d,null,a.createElement(p,null,"Destination Path"))),a.createElement(s,null,a.createElement(d,{key:x||"root"},a.createElement(p,{component:"th",scope:"row"},x||"Select a destination path"))))),a.createElement(Fe,{defaultCollapseIcon:a.createElement(y,null),defaultExpandIcon:a.createElement(g,null),defaultExpanded:[o],expanded:O,selected:x,onNodeToggle:function(e,t){I(t)},onNodeSelect:function(e,t){return ae(n,void 0,void 0,(function(){return oe(this,(function(e){return C(t),ir.next(t),A(t,!1),[2]}))}))},sx:{height:"calc(90vh - 64px - 1px - 140px - 110px - 30px - 64px - 15px)",flexGrow:1,maxWidth:"100%",overflowY:"auto"}},F(i)),a.createElement(ze,{anchorEl:E,onMenuClose:function(){S(null)},position:P,onCreateFolder:function(){S(null),k(!0)},onRenameFolder:function(){S(null),R(!0)},onContextMenu:function(e){S(null),e.preventDefault()}})),a.createElement(or,{open:U,onClose:function(e){e&&A(P.path,!0),k(!1)},path:P.path}),a.createElement(lr,{open:_,onClose:function(e){if(e){var t=P.path.split("/").slice(0,-1).join("/");A(t,!0)}R(!1)},path:P.path}))}const sr=z("SHOW_WIDGET_DIALOG"),ur=z("CLOSE_WIDGET_DIALOG");var fr=n((function(e,t){return a.createElement(V,ne({elevation:6,ref:t,variant:"filled"},e))}));function dr(e){var r=this,n=e.rootDir,o=e.selectedItem,l=i(),c=t({open:!1,severity:"info",message:""}),s=c[0],u=c[1],f=t(""),d=f[0],p=f[1],m=t(!1),b=m[0],y=m[1];ir.subscribe((function(e){p(e)}));var g=function(){u(Object.assign({},{open:!1,severity:s.severity,message:s.message}))},h=function(e,t){return ae(r,void 0,void 0,(function(){var r,n,a,l;return oe(this,(function(i){switch(i.label){case 0:return e.preventDefault(),!b&&d&&o&&o.path?(y(!0),r=o.path,n=d,[4,ar.copyItem(r,n)]):[2];case 1:return(a=i.sent())?(l=a.items[0],t&&l&&ar.openEditForm(o.contentType,l),t||u({open:!0,severity:"success",message:"Selected files are copied to destination folder."}),y(!1),[2]):(y(!1),[2,u({open:!0,severity:"error",message:"There is an error while copying file: ".concat(r)})])}}))}))},v=function(){p(""),y(!1)};return a.createElement(a.Fragment,null,a.createElement(T,null,a.createElement(Qe,{variant:"outlined",color:"primary",onClick:function(e){var t;"backdropClick"!==(t=null)&&"escapeKeyDown"!==t&&(v(),l(ur()))},disabled:b},"Close"),a.createElement(Je,{variant:"contained",color:"primary",onClick:function(e){return h(e,!1)},disabled:b||!n||!d},"Copy"),a.createElement(Je,{variant:"contained",color:"primary",onClick:function(e){h(e,!0)},disabled:b||!n||!d},"Copy and Edit")),a.createElement(K,{spacing:2,sx:{width:"100%"}},a.createElement($,{open:s&&s.open,autoHideDuration:4e3,onClose:g},a.createElement(fr,{onClose:g,severity:s.severity,sx:{width:"100%"}},s.message))))}function pr(){var e,t=te(),r=t?ar.getPreviewItem(t):null,n=(e=r)&&e.path&&e.path.startsWith("/site/website")?"/site/website":e&&e.path&&e.path.startsWith("/site/components")?"/site/components":null;return a.createElement(o,null,a.createElement(re,{selectedItem:r}),a.createElement(cr,{rootDir:n}),a.createElement(dr,{rootDir:n,selectedItem:r}))}function mr(t){var r=t.title?t.title:"Smart Copy",n=t.icon&&t.icon.id?t.icon.id:"@mui/icons-material/ContentPasteOutlined",a=i();return e.createElement(q,{icon:{id:n},title:r,onClick:function(){return a(sr({title:r,extraProps:t,widget:{id:"org.rd.plugin.smartcopy.dialog"}}))}})}function br(t){var r=t.title?t.title:"Smart Copy",n=i();return e.createElement(Q,{title:r},e.createElement(Z,{size:"large",onClick:function(){return n(sr({title:r,extraProps:t,widget:{id:"org.rd.plugin.smartcopy.dialog"}}))}},e.createElement(J,null)))}var yr={locales:void 0,scripts:void 0,stylesheets:void 0,id:"org.rd.plugin.smartcopy",widgets:{"org.rd.plugin.smartcopy.dialog":pr,"org.rd.plugin.smartcopy.openSmartCopyPanelButton":mr,"org.rd.plugin.smartcopy.openSmartCopyToolbarButton":br}};export{pr as Dialog,mr as OpenSmartCopyPanelButton,br as OpenSmartCopyToolbarButton,yr as default};
